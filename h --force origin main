[1mdiff --git a/.gitignore b/.gitignore[m
[1mnew file mode 100644[m
[1mindex 0000000..03b75c6[m
[1m--- /dev/null[m
[1m+++ b/.gitignore[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m*:Zone.Identifier[m
[1mdiff --git a/HTPOC b/HTPOC[m
[1mdeleted file mode 160000[m
[1mindex 436ef1a..0000000[m
[1m--- a/HTPOC[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-Subproject commit 436ef1a65e97549575c9f26019d1f0b3c80544b4[m
[1mdiff --git a/New_res_partner/__init__.py b/New_res_partner/__init__.py[m
[1mdeleted file mode 100644[m
[1mindex 91141d9..0000000[m
[1m--- a/New_res_partner/__init__.py[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m-from . import models[m
[31m-#from . import controller[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/__manifest__.py b/New_res_partner/__manifest__.py[m
[1mdeleted file mode 100644[m
[1mindex 3e3472c..0000000[m
[1m--- a/New_res_partner/__manifest__.py[m
[1m+++ /dev/null[m
[36m@@ -1,22 +0,0 @@[m
[31m-{[m
[31m-    'name': "New_res_partner",[m
[31m-    'version': '1.0',[m
[31m-    'depends': ['base','sms'],[m
[31m-    'category': 'App',[m
[31m-    'application': False,[m
[31m-    'installable':True,[m
[31m-    'license': 'LGPL-3',[m
[31m-    'data': [[m
[31m-        'views/new_res_partner_view.xml',[m
[31m-        'views/new_res_partner_company_view.xml',[m
[31m-        'views/new_res_partner_work_type_view.xml',[m
[31m-        'views/new_res_partner_function_view.xml',[m
[31m-        'security/ir.model.access.csv',[m
[31m-        'data/ir_cron_data.xml',[m
[31m-    ],[m
[31m-    'assets': {[m
[31m-        'web.assets_backend': [[m
[31m-            'New_res_partner/static/src/css/custom_styles.css',[m
[31m-        ],[m
[31m-    },[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/__pycache__/__init__.cpython-310.pyc b/New_res_partner/__pycache__/__init__.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 65e9469..0000000[m
Binary files a/New_res_partner/__pycache__/__init__.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/data/ir_cron_data.xml b/New_res_partner/data/ir_cron_data.xml[m
[1mdeleted file mode 100644[m
[1mindex 3d76883..0000000[m
[1m--- a/New_res_partner/data/ir_cron_data.xml[m
[1m+++ /dev/null[m
[36m@@ -1,16 +0,0 @@[m
[31m-<?xml version="1.0" encoding="utf-8"?>[m
[31m-<odoo>[m
[31m-    <data noupdate="1">[m
[31m-        <record id="ir_cron_send_expiration_notifications" model="ir.cron">[m
[31m-            <field name="name">Send Expiration Notifications</field>[m
[31m-            <field name="model_id" ref="model_res_partner"/>[m
[31m-            <field name="state">code</field>[m
[31m-            <field name="code">model._cron_send_expiration_notifications()</field>[m
[31m-            <field name="interval_number">1</field>[m
[31m-            <field name="interval_type">weeks</field>[m
[31m-            <field name="numbercall">-1</field>[m
[31m-            <field name="doall" eval="False"/>[m
[31m-            <field name="active" eval="True"/>[m
[31m-        </record>[m
[31m-    </data>[m
[31m-</odoo>[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/models/__init__.py b/New_res_partner/models/__init__.py[m
[1mdeleted file mode 100644[m
[1mindex 9cb4e9e..0000000[m
[1m--- a/New_res_partner/models/__init__.py[m
[1m+++ /dev/null[m
[36m@@ -1,5 +0,0 @@[m
[31m-from . import new_res_partner[m
[31m-from . import new_res_partner_company[m
[31m-from . import new_res_partner_work_type[m
[31m-from . import new_res_partner_function[m
[31m-from . import reason[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/models/__pycache__/__init__.cpython-310.pyc b/New_res_partner/models/__pycache__/__init__.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex a0f3365..0000000[m
Binary files a/New_res_partner/models/__pycache__/__init__.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner.cpython-310.pyc b/New_res_partner/models/__pycache__/new_res_partner.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 2dd4cc6..0000000[m
Binary files a/New_res_partner/models/__pycache__/new_res_partner.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_category_id.cpython-310.pyc b/New_res_partner/models/__pycache__/new_res_partner_category_id.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 6f5dbe3..0000000[m
Binary files a/New_res_partner/models/__pycache__/new_res_partner_category_id.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_company.cpython-310.pyc b/New_res_partner/models/__pycache__/new_res_partner_company.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 47590e2..0000000[m
Binary files a/New_res_partner/models/__pycache__/new_res_partner_company.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_function.cpython-310.pyc b/New_res_partner/models/__pycache__/new_res_partner_function.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 937ef49..0000000[m
Binary files a/New_res_partner/models/__pycache__/new_res_partner_function.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_safety.cpython-310.pyc b/New_res_partner/models/__pycache__/new_res_partner_safety.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 36c1871..0000000[m
Binary files a/New_res_partner/models/__pycache__/new_res_partner_safety.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_title.cpython-310.pyc b/New_res_partner/models/__pycache__/new_res_partner_title.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 93f1bf9..0000000[m
Binary files a/New_res_partner/models/__pycache__/new_res_partner_title.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_work_type.cpython-310.pyc b/New_res_partner/models/__pycache__/new_res_partner_work_type.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 6308457..0000000[m
Binary files a/New_res_partner/models/__pycache__/new_res_partner_work_type.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/__pycache__/reason.cpython-310.pyc b/New_res_partner/models/__pycache__/reason.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex 147dc5d..0000000[m
Binary files a/New_res_partner/models/__pycache__/reason.cpython-310.pyc and /dev/null differ
[1mdiff --git a/New_res_partner/models/new_res_partner.py b/New_res_partner/models/new_res_partner.py[m
[1mdeleted file mode 100644[m
[1mindex 50c763f..0000000[m
[1m--- a/New_res_partner/models/new_res_partner.py[m
[1m+++ /dev/null[m
[36m@@ -1,281 +0,0 @@[m
[31m-from odoo import api, fields, models, _[m
[31m-from odoo.exceptions import UserError[m
[31m-from odoo.tools.translate import _[m
[31m-from odoo.tools import DEFAULT_SERVER_DATE_FORMAT[m
[31m-import logging[m
[31m-from dateutil.relativedelta import relativedelta[m
[31m-from odoo.exceptions import ValidationError[m
[31m-[m
[31m-_logger = logging.getLogger(__name__)[m
[31m-class NewResPartner(models.Model):[m
[31m-    _inherit = 'res.partner'[m
[31m-    [m
[31m-[m
[31m-    #新增字段[m
[31m-    # new_function=fields.Char(string="工作職位")[m
[31m-    new_function=fields.Many2one('new.res.partner.function', string="工作職位")[m
[31m-    address = fields.Char(string="緊急聯絡人地址")[m
[31m-    gender = fields.Selection([[m
[31m-        ('male', '男'),[m
[31m-        ('female', '女'),[m
[31m-        ], string='性別')[m
[31m-    id_number=fields.Char(string="身分證字號",required=True, copy= False )[m
[31m-    _sql_constraints = [[m
[31m-        ('unique_id_number', 'UNIQUE(id_number)', '身分證字號必須是唯一的！請確認此人是否已經存在於名單內！'),[m
[31m-    ][m
[31m-    blood_type=fields.Selection([    [m
[31m-        ('A', 'A型'),[m
[31m-        ('B', 'B型'),[m
[31m-        ('O', 'O型'),[m
[31m-        ('AB', 'AB型'),[m
[31m-        ], string='血型')[m
[31m-    birthday=fields.Date(string="生日")[m
[31m-    age = fields.Integer(string="年齡", compute='_compute_age', store=True)[m
[31m-    emergency_contact=fields.Char(string="緊急聯絡人")[m
[31m-    emergency_relationship=fields.Char(string="緊急聯絡人關係")[m
[31m-    emergency_number=fields.Char(string="緊急聯絡人電話")[m
[31m-    admission=fields.Selection([[m
[31m-        ('no', '不可入場'),[m
[31m-        ('yes', '可入場')[m
[31m-        ], string='可否入場', compute='_compute_admission', store=True)[m
[31m-    main_contractor=fields.Many2one('new.res.partner.company', string="主承攬商")[m
[31m-    sub_contractor=fields.Many2one('new.res.partner.company', string="次承攬商")[m
[31m-    under_contractor=fields.Many2one('new.res.partner.company', string="下包商")[m
[31m-    work_type=fields.Many2one('new.res.partner.work.type', string="工種")[m
[31m-    industrial_safety_personnel=fields.Many2one('res.partner', string="工安人員", domain=[('category_id', '=', '工安人員')])[m
[31m-    industrial_safety_mobile=fields.Char(string="工安行動電話", readonly=True, compute='_compute_industrial_safety_mobile')[m
[31m-    [m
[31m-    physical_examination_date=fields.Date(string="體檢日期")[m
[31m-    next_physical_examination_date = fields.Date(string="下一次體檢日期", compute='_compute_next_examination_date', store=True)[m
[31m-    Six_hour_class_date = fields.Date(string="六小時上課日期")[m
[31m-    six_hour_class_expired = fields.Boolean(string="六小時上課到期", compute='_compute_class_expiration', store=True)[m
[31m-    six_hour_class_expiry_date = fields.Date(string="六小時上課到期日", compute='_compute_class_expiration', store=True)[m
[31m-    hazard_notification_class_date = fields.Date(string="危害告知上課日期")[m
[31m-    hazard_notification_class_expired = fields.Boolean(string="危害告知上課到期", compute='_compute_class_expiration', store=True)[m
[31m-    hazard_notification_class_expiry_date = fields.Date(string="危害告知上課到期日", compute='_compute_class_expiration', store=True)[m
[31m-    next_physical_examination_status = fields.Selection([[m
[31m-        ('valid', '有效'),[m
[31m-        ('expired', '已逾期'),[m
[31m-    ], string="體檢狀態", compute='_compute_date_status')[m
[31m-    six_hour_class_status = fields.Selection([[m
[31m-        ('valid', '有效'),[m
[31m-        ('expired', '已逾期'),[m
[31m-    ], string="六小時上課狀態", compute='_compute_date_status')[m
[31m-    hazard_notification_class_status = fields.Selection([[m
[31m-        ('valid', '證件有效'),[m
[31m-        ('expired', '無效證件'),[m
[31m-    ], string="危害告知上課狀態", compute='_compute_date_status')[m
[31m-[m
[31m-    id_photo_front=fields.Binary(string="1.1. 身分證正面")[m
[31m-    id_photo_back=fields.Binary(string="1.2. 身分證背面")[m
[31m-    mug_shot=fields.Binary(string="2. 大頭照")[m
[31m-    life_mug_shot_01=fields.Binary(string="2.1. 生活大頭照01[辨識使用]")[m
[31m-    life_mug_shot_02=fields.Binary(string="2.2. 生活大頭照02[辨識使用]")[m
[31m-    life_mug_shot_03=fields.Binary(string="2.3. 生活大頭照03[辨識使用]")[m
[31m-    life_mug_shot_04=fields.Binary(string="2.4. 生活大頭照04[辨識使用]")[m
[31m-    construction_six_hour=fields.Binary(string="3. 營造六小時")[m
[31m-    physical_examination_form=fields.Binary(string="4. 體檢表")[m
[31m-    labor_insurance=fields.Binary(string="5. 勞保")[m
[31m-    hazzard_notification=fields.Binary(string="6. 危害告知")[m
[31m-    personal_date_consent_form=fields.Binary(string="7. 個人資料同意書")[m
[31m-    security_cutoff_letter=fields.Binary(string="8. 資安通訊保密切結書")[m
[31m-    foreigner_entry_certificate=fields.Binary(string="10. 外籍人士入台證明影本")[m
[31m-    health_commitment=fields.Binary(string="9. 健康承諾書")[m
[31m-[m
[31m-[m
[31m-    #檢查身分證字號是否是唯一的[m
[31m-    @api.constrains('id_number')[m
[31m-[m
[31m-    def _check_id_number(self):[m
[31m-        for record in self:[m
[31m-            if record.id_number:[m
[31m-                existing = self.env['res.partner'].search([[m
[31m-                    ('id_number', '=', record.id_number),[m
[31m-                    ('id', '!=', record.id)[m
[31m-                ])[m
[31m-                if existing:[m
[31m-                    raise ValidationError(_("身分證字號 %s 已存在，人員資料不允許重複建立！") % record.id_number)[m
[31m-                [m
[31m-    def write(self, vals):[m
[31m-        if 'id_number' in vals:[m
[31m-            for record in self:[m
[31m-                if record.id_number != vals['id_number']:[m
[31m-                    existing = self.env['res.partner'].search([[m
[31m-                        ('id_number', '=', vals['id_number']),[m
[31m-                        ('id', '!=', record.id)[m
[31m-                    ])[m
[31m-                    if existing:[m
[31m-                        raise ValidationError(_("身分證字號 %s 已存在，人員資料不允許重複更新！") % vals['id_number'])[m
[31m-        return super(NewResPartner, self).write(vals)[m
[31m-[m
[31m-    #計算工安行動電話[m
[31m-    @api.onchange('industrial_safety_personnel')[m
[31m-    def _onchange_industrial_safety_personnel(self):[m
[31m-        self._compute_industrial_safety_mobile()[m
[31m-[m
[31m-    @api.depends('industrial_safety_personnel')[m
[31m-    def _compute_industrial_safety_mobile(self):[m
[31m-        if self.industrial_safety_personnel:[m
[31m-            self.industrial_safety_mobile = self.industrial_safety_personnel.mobile[m
[31m-        else:[m
[31m-            self.industrial_safety_mobile = False[m
[31m-[m
[31m-    #在人名前面加上公司名稱[m
[31m-    @api.depends('name', 'parent_id.name')[m
[31m-    def _compute_display_name(self):[m
[31m-        for partner in self:[m
[31m-            if partner.parent_id and partner.parent_id.is_company:[m
[31m-                partner.display_name = f"{partner.parent_id.name}, {partner.name}"[m
[31m-            else:[m
[31m-                partner.display_name = partner.name[m
[31m-[m
[31m-    # 計算年齡[m
[31m-    @api.depends('birthday')[m
[31m-    def _compute_age(self):[m
[31m-        for record in self:[m
[31m-            if record.birthday:[m
[31m-                today = fields.Date.today()[m
[31m-                born = fields.Date.from_string(record.birthday)[m
[31m-                # 計算年齡[m
[31m-                record.age = today.year - born.year - ((today.month, today.day) < (born.month, born.day))[m
[31m-            else:[m
[31m-                record.age = 0  # 如果沒有生日，則設定年齡為0[m
[31m-[m
[31m-    # 計算下一次體檢日期[m
[31m-    @api.depends('age', 'physical_examination_date')[m
[31m-    def _compute_next_examination_date(self):[m
[31m-        for record in self:[m
[31m-            if record.physical_examination_date and record.age:[m
[31m-                if record.age < 45:[m
[31m-                    years_to_add = 5[m
[31m-                elif 45 <= record.age < 65:[m
[31m-                    years_to_add = 3[m
[31m-                else:[m
[31m-                    years_to_add = 1[m
[31m-                [m
[31m-                record.next_physical_examination_date = record.physical_examination_date + relativedelta(years=years_to_add)[m
[31m-            else:[m
[31m-                record.next_physical_examination_date = False[m
[31m-[m
[31m-    @api.depends('Six_hour_class_date', 'hazard_notification_class_date')[m
[31m-    def _compute_class_expiration(self):[m
[31m-        today = fields.Date.today()[m
[31m-        for record in self:[m
[31m-            # 計算六小時上課日期到期時間[m
[31m-            if record.Six_hour_class_date:[m
[31m-                expiry_date = record.Six_hour_class_date + relativedelta(years=3)[m
[31m-                record.six_hour_class_expiry_date = expiry_date[m
[31m-                record.six_hour_class_expired = today >= (expiry_date - relativedelta(months=1))[m
[31m-            else:[m
[31m-                record.six_hour_class_expired = False[m
[31m-                record.six_hour_class_expiry_date = False[m
[31m-[m
[31m-            # 計算危害告知上課日期到期時間[m
[31m-            if record.hazard_notification_class_date:[m
[31m-                expiry_date = record.hazard_notification_class_date + relativedelta(years=3)[m
[31m-                record.hazard_notification_class_expiry_date = expiry_date[m
[31m-                record.hazard_notification_class_expired = today >= (expiry_date - relativedelta(months=1))[m
[31m-            else:[m
[31m-                record.hazard_notification_class_expired = False[m
[31m-                record.hazard_notification_class_expiry_date = False[m
[31m-[m
[31m-    @api.depends('next_physical_examination_date', 'six_hour_class_expiry_date', 'hazard_notification_class_expiry_date')[m
[31m-    def _compute_admission(self):[m
[31m-        today = fields.Date.today()[m
[31m-        for record in self:[m
[31m-            if (record.next_physical_examination_date and record.next_physical_examination_date < today) or \[m
[31m-               (record.six_hour_class_expiry_date and record.six_hour_class_expiry_date < today) or \[m
[31m-               (record.hazard_notification_class_expiry_date and record.hazard_notification_class_expiry_date < today):[m
[31m-                record.admission = 'no'[m
[31m-            else:[m
[31m-                record.admission = 'yes'[m
[31m-[m
[31m-    # 檢查課程到期狀態[m
[31m-    @api.depends('next_physical_examination_date', 'six_hour_class_expiry_date', 'hazard_notification_class_expiry_date')[m
[31m-    def _compute_date_status(self):[m
[31m-        today = fields.Date.today()[m
[31m-        for record in self:[m
[31m-            record.next_physical_examination_status = 'valid' if record.next_physical_examination_date and record.next_physical_examination_date >= today else 'expired'[m
[31m-            record.six_hour_class_status = 'valid' if record.six_hour_class_expiry_date and record.six_hour_class_expiry_date >= today else 'expired'[m
[31m-            record.hazard_notification_class_status = 'valid' if record.hazard_notification_class_expiry_date and record.hazard_notification_class_expiry_date >= today else 'expired'[m
[31m-[m
[31m-    # @api.depends('last_physical_examination_date')[m
[31m-    # def _compute_next_examination_date(self):[m
[31m-    #     for employee in self:[m
[31m-    #         if employee.last_physical_examination_date:[m
[31m-    #             employee.next_physical_examination_date = employee.last_physical_examination_date + relativedelta(years=1)[m
[31m-[m
[31m-    # @api.depends('Six_hour_class_date', 'hazard_notification_class_date')[m
[31m-    # def _compute_class_expiration(self):[m
[31m-    #     for record in self:[m
[31m-    #         if record.Six_hour_class_date:[m
[31m-    #             record.six_hour_class_expiry_date = record.Six_hour_class_date + relativedelta(years=3)[m
[31m-    #         if record.hazard_notification_class_date:[m
[31m-    #             record.hazard_notification_class_expiry_date = record.hazard_notification_class_date + relativedelta(years=3)[m
[31m-[m
[31m-    # def send_expiration_notifications(self):[m
[31m-    #     _logger.info("Starting send_expiration_notifications")[m
[31m-    #     today = fields.Date.today()[m
[31m-    #     one_month_later = today + relativedelta(months=1)[m
[31m-    #     _logger.info(f"Today: {today}, One month later: {one_month_later}")[m
[31m-        [m
[31m-    #     employees_to_notify = self.search([[m
[31m-    #         '|', '|',[m
[31m-    #         ('next_physical_examination_date', '<=', one_month_later),[m
[31m-    #         ('six_hour_class_expiry_date', '<=', one_month_later),[m
[31m-    #         ('hazard_notification_class_expiry_date', '<=', one_month_later)[m
[31m-    #     ])[m
[31m-    #     _logger.info(f"Found {len(employees_to_notify)} employees to notify")[m
[31m-[m
[31m-    #     company_email = self.env.company.email[m
[31m-    #     if not company_email:[m
[31m-    #         _logger.error("Company email is not set")[m
[31m-    #         return[m
[31m-[m
[31m-    #     for employee in employees_to_notify:[m
[31m-    #         _logger.info(f"Processing employee: {employee.name}")[m
[31m-    #         if employee.email:[m
[31m-    #             expiring_items = [][m
[31m-    #             if employee.next_physical_examination_date and employee.next_physical_examination_date <= one_month_later:[m
[31m-    #                 expiring_items.append('體檢')[m
[31m-    #             if employee.six_hour_class_expiry_date and employee.six_hour_class_expiry_date <= one_month_later:[m
[31m-    #                 expiring_items.append('六小時上課')[m
[31m-    #             if employee.hazard_notification_class_expiry_date and employee.hazard_notification_class_expiry_date <= one_month_later:[m
[31m-    #                 expiring_items.append('危害告知上課')[m
[31m-[m
[31m-    #             if expiring_items:[m
[31m-    #                 subject = f"員工 {employee.name} 的 {', '.join(expiring_items)} 即將到期"[m
[31m-    #                 body = f"""[m
[31m-    #                 尊敬的 {employee.name}，[m
[31m-[m
[31m-    #                 請注意，您的以下項目即將在一個月內到期：[m
[31m-[m
[31m-    #                 {', '.join(expiring_items)}[m
[31m-[m
[31m-    #                 請盡快安排相關更新。[m
[31m-[m
[31m-    #                 此致，[m
[31m-    #                 人力資源部[m
[31m-    #                 """[m
[31m-[m
[31m-    #                 try:[m
[31m-    #                     self.env['mail.mail'].create({[m
[31m-    #                         'subject': subject,[m
[31m-    #                         'body_html': body,[m
[31m-    #                         'email_from': res.company.email,[m
[31m-    #                         'email_to': res.partner.email,[m
[31m-    #                         'auto_delete': False,[m
[31m-    #                     }).send()[m
[31m-    #                     _logger.info(f"Notification email sent to {employee.name} at {employee.email}")[m
[31m-    #                 except Exception as e:[m
[31m-    #                     _logger.error(f"Failed to send email to {employee.name}: {str(e)}")[m
[31m-    #             else:[m
[31m-    #                 _logger.info(f"No expiring items for {employee.name}")[m
[31m-    #         else:[m
[31m-    #             _logger.warning(f"No email address for {employee.name}")[m
[31m-[m
[31m-    #     _logger.info("Finished send_expiration_notifications")[m
[31m-[m
[31m-    @api.model[m
[31m-    def _cron_send_expiration_notifications(self):[m
[31m-        self.send_expiration_notifications()[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/models/new_res_partner_company.py b/New_res_partner/models/new_res_partner_company.py[m
[1mdeleted file mode 100644[m
[1mindex 1faf647..0000000[m
[1m--- a/New_res_partner/models/new_res_partner_company.py[m
[1m+++ /dev/null[m
[36m@@ -1,7 +0,0 @@[m
[31m-from odoo import api, fields, models[m
[31m-[m
[31m-class NewResPartnerCompany(models.Model):[m
[31m-    _name = 'new.res.partner.company'[m
[31m-    _description = 'New Partner Company'[m
[31m-[m
[31m-    name=fields.Char(string="廠商名稱")[m
[1mdiff --git a/New_res_partner/models/new_res_partner_function.py b/New_res_partner/models/new_res_partner_function.py[m
[1mdeleted file mode 100644[m
[1mindex 225b29e..0000000[m
[1m--- a/New_res_partner/models/new_res_partner_function.py[m
[1m+++ /dev/null[m
[36m@@ -1,7 +0,0 @@[m
[31m-from odoo import api, fields, models[m
[31m-[m
[31m-class NewResPartnerFunction(models.Model):[m
[31m-    _name = 'new.res.partner.function'[m
[31m-    _description = 'New Partner Function'[m
[31m-[m
[31m-    name=fields.Char(string="職位名稱")[m
[1mdiff --git a/New_res_partner/models/new_res_partner_work_type.py b/New_res_partner/models/new_res_partner_work_type.py[m
[1mdeleted file mode 100644[m
[1mindex 3c54b3d..0000000[m
[1m--- a/New_res_partner/models/new_res_partner_work_type.py[m
[1m+++ /dev/null[m
[36m@@ -1,7 +0,0 @@[m
[31m-from odoo import api, fields, models[m
[31m-[m
[31m-class NewResPartnerWorkType(models.Model):[m
[31m-    _name = 'new.res.partner.work.type'[m
[31m-    _description = 'New Partner Work Type'[m
[31m-[m
[31m-    name=fields.Char(string="工種名稱")[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/models/reason.py b/New_res_partner/models/reason.py[m
[1mdeleted file mode 100644[m
[1mindex 3a8687f..0000000[m
[1m--- a/New_res_partner/models/reason.py[m
[1m+++ /dev/null[m
[36m@@ -1,14 +0,0 @@[m
[31m-from odoo import models, fields, api[m
[31m-[m
[31m-class NoEntryReason(models.Model):[m
[31m-    _name = 'no.entry.reason'[m
[31m-    _description = '不可入場原因記錄'[m
[31m-[m
[31m-    partner_id = fields.Many2one('res.partner', string='聯絡人', required=True, ondelete='cascade')[m
[31m-    reason = fields.Text(string="不可入場原因紀錄")[m
[31m-    date = fields.Date(string="記錄日期")[m
[31m-[m
[31m-class ResPartner(models.Model):[m
[31m-    _inherit = 'res.partner'[m
[31m-[m
[31m-    no_entry_reason_ids = fields.One2many('no.entry.reason', 'partner_id', string='不可入場原因記錄')[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/security/ir.model.access.csv b/New_res_partner/security/ir.model.access.csv[m
[1mdeleted file mode 100644[m
[1mindex 709279f..0000000[m
[1m--- a/New_res_partner/security/ir.model.access.csv[m
[1m+++ /dev/null[m
[36m@@ -1,5 +0,0 @@[m
[31m-id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink[m
[31m-access_new_res_partner_company,access_new_res_partner_company,model_new_res_partner_company,base.group_user,1,1,1,1[m
[31m-access_new_res_partner_work_type,access_new_res_partner_work_type,model_new_res_partner_work_type,base.group_user,1,1,1,1[m
[31m-access_new_res_partner_function,access_new_res_partner_function,model_new_res_partner_function,base.group_user,1,1,1,1[m
[31m-access_no_entry_reason,access_no_entry_reason,model_no_entry_reason,base.group_user,1,1,1,1[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/static/src/css/custom_styles.css b/New_res_partner/static/src/css/custom_styles.css[m
[1mdeleted file mode 100644[m
[1mindex 71ed4a3..0000000[m
[1m--- a/New_res_partner/static/src/css/custom_styles.css[m
[1m+++ /dev/null[m
[36m@@ -1,7 +0,0 @@[m
[31m-.new_oe_avatar {[m
[31m-    border: none;[m
[31m-    box-shadow: none;[m
[31m-    max-width: 70px;[m
[31m-    max-height: 70px;[m
[31m-    margin-right: 300px;[m
[31m-}[m
[1mdiff --git a/New_res_partner/views/new_res_partner_company_view.xml b/New_res_partner/views/new_res_partner_company_view.xml[m
[1mdeleted file mode 100644[m
[1mindex 9a0bc51..0000000[m
[1m--- a/New_res_partner/views/new_res_partner_company_view.xml[m
[1m+++ /dev/null[m
[36m@@ -1,29 +0,0 @@[m
[31m-<?xml version="1.0" encoding="utf-8"?>[m
[31m-<odoo>[m
[31m-    <data>[m
[31m-        <!-- 树状视图 -->[m
[31m-        <record id="view_new_res_partner_company_tree" model="ir.ui.view">[m
[31m-            <field name="name">new.res.partner.company.tree</field>[m
[31m-            <field name="model">new.res.partner.company</field>[m
[31m-            <field name="arch" type="xml">[m
[31m-                <tree string="廠商列表">[m
[31m-                    <field name="name"/>[m
[31m-                </tree>[m
[31m-            </field>[m
[31m-        </record>[m
[31m-[m
[31m-        <!-- 动作 -->[m
[31m-        <record id="action_new_res_partner_company" model="ir.actions.act_window">[m
[31m-            <field name="name">承攬廠商</field>[m
[31m-            <field name="res_model">new.res.partner.company</field>[m
[31m-            <field name="view_mode">tree,form</field>[m
[31m-        </record>[m
[31m-[m
[31m-        <!-- 菜单项 -->[m
[31m-        <menuitem id="menu_new_res_partner_company"[m
[31m-                  name="承攬廠商"[m
[31m-                  action="action_new_res_partner_company"[m
[31m-                  parent="contacts.res_partner_menu_config"[m
[31m-                  sequence="0"/>[m
[31m-    </data>[m
[31m-</odoo>[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/views/new_res_partner_function_view.xml b/New_res_partner/views/new_res_partner_function_view.xml[m
[1mdeleted file mode 100644[m
[1mindex c857e3d..0000000[m
[1m--- a/New_res_partner/views/new_res_partner_function_view.xml[m
[1m+++ /dev/null[m
[36m@@ -1,29 +0,0 @@[m
[31m-<?xml version="1.0" encoding="utf-8"?>[m
[31m-<odoo>[m
[31m-    <data>[m
[31m-        <!-- 树状视图 -->[m
[31m-        <record id="view_new_res_partner_function_tree" model="ir.ui.view">[m
[31m-            <field name="name">new.res.partner.function.tree</field>[m
[31m-            <field name="model">new.res.partner.function</field>[m
[31m-            <field name="arch" type="xml">[m
[31m-                <tree string="職位列表">[m
[31m-                    <field name="name"/>[m
[31m-                </tree>[m
[31m-            </field>[m
[31m-        </record>[m
[31m-[m
[31m-        <!-- 动作 -->[m
[31m-        <record id="action_new_res_partner_function" model="ir.actions.act_window">[m
[31m-            <field name="name">職位</field>[m
[31m-            <field name="res_model">new.res.partner.function</field>[m
[31m-            <field name="view_mode">tree,form</field>[m
[31m-        </record>[m
[31m-[m
[31m-        <!-- 菜单项 -->[m
[31m-        <menuitem id="menu_new_res_partner_function"[m
[31m-                  name="職位"[m
[31m-                  action="action_new_res_partner_function"[m
[31m-                  parent="contacts.res_partner_menu_config"[m
[31m-                  sequence="0"/>[m
[31m-    </data>[m
[31m-</odoo>[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/views/new_res_partner_view.xml b/New_res_partner/views/new_res_partner_view.xml[m
[1mdeleted file mode 100644[m
[1mindex 258129a..0000000[m
[1m--- a/New_res_partner/views/new_res_partner_view.xml[m
[1m+++ /dev/null[m
[36m@@ -1,178 +0,0 @@[m
[31m-<?xml version="1.0" encoding="utf-8"?>[m
[31m-<odoo>[m
[31m-    <data>[m
[31m-        <record id="view_partner_form_inherited" model="ir.ui.view">[m
[31m-            <field name="name">res.partner.form.inherited</field>[m
[31m-            <field name="model">res.partner</field>[m
[31m-            <field name="inherit_id" ref="base.view_partner_form"/>[m
[31m-            <field name="arch" type="xml">[m
[31m-                <!-- 隱藏頁面 -->[m
[31m-                <!-- 隱藏地址類型下拉選單 -->[m
[31m-                <xpath expr="//field[@name='type']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-                <xpath expr="//span[@name='address_name']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 隱藏地址類型標籤 -->[m
[31m-                <xpath expr="//label[@for='street']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 隱藏整個地址欄位區域 -->[m
[31m-                <xpath expr="//div[@class='o_address_format']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 隱藏地址標籤 -->[m
[31m-                <xpath expr="//label[@for='street']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- <xpath expr="//page[@name='contact_addresses']" position="attributes">[m
[31m-                    <attribute name="invisible">not is_company</attribute>[m
[31m-                </xpath> -->[m
[31m-                <xpath expr="//page[@name='sales_purchases']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-                <xpath expr="//page[@name='internal_notes']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 隱藏或移除原位置不需要的字段 -->[m
[31m-                <xpath expr="//field[@name='title']" position="replace"/>[m
[31m-                <xpath expr="//field[@name='category_id']" position="replace"/>[m
[31m-                <xpath expr="//field[@name='vat']" position="attributes">[m
[31m-                    <attribute name="invisible">not is_company</attribute>[m
[31m-                </xpath>[m
[31m-                <xpath expr="//field[@name='lang']" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 在左側group添加字段 -->[m
[31m-                <xpath expr="//group/group[1]/span[@name='address_name']" position="before">[m
[31m-                    <field name="new_function" placeholder="例如: 銷售總監" invisible="is_company"/>[m
[31m-                    <field name="title" string="稱謂" options='{"no_open": True}' placeholder="例如: 先生"[m
[31m-                                invisible="is_company"/>[m
[31m-                    <field name="category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"[m
[31m-                                   placeholder='例如,"B2B"、"VIP"、"諮詢"......'/>[m
[31m-                    <field name="gender" widget="radio" options="{'horizontal': true}" invisible="is_company"/>[m
[31m-                    <field name="id_number" invisible="is_company"/>[m
[31m-                    <field name="blood_type" invisible="is_company"/>[m
[31m-                    <field name="birthday" invisible="is_company"/>[m
[31m-                    <field name="age" invisible="is_company"/>[m
[31m-                    <field name="emergency_contact" invisible="is_company"/>[m
[31m-                    <field name="emergency_relationship" invisible="is_company"/>[m
[31m-                    <field name="emergency_number" invisible="is_company"/>[m
[31m-                    <field name="address" />[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 在右側group添加字段 -->[m
[31m-                <xpath expr="//group/group[2]/field[@name='function']" position="replace">[m
[31m-                    <field name="admission" widget="statusbar" options="{'clickable': '1'}" statusbar_visible="no,yes"/>[m
[31m-                </xpath>[m
[31m-                <xpath expr="//field[@name='website']" position="replace">[m
[31m-                    <field name="main_contractor"/>[m
[31m-                    <field name="sub_contractor"/>[m
[31m-                    <field name="under_contractor"/>[m
[31m-                    <field name="work_type"/>[m
[31m-                    <field name="industrial_safety_personnel"/>[m
[31m-                    <field name="industrial_safety_mobile" readonly="1"/>[m
[31m-                    <field name="physical_examination_date" invisible="is_company"/>[m
[31m-                    <field name="next_physical_examination_date" invisible="is_company"/>[m
[31m-                    <field name="next_physical_examination_status" widget="badge"[m
[31m-                            decoration-success="next_physical_examination_status == 'valid'"[m
[31m-                            decoration-danger="next_physical_examination_status == 'expired'"[m
[31m-                            invisible="is_company"/>[m
[31m-                    <field name="Six_hour_class_date" invisible="is_company"/>[m
[31m-                    <field name="six_hour_class_expiry_date" invisible="is_company"/>[m
[31m-                    <field name="six_hour_class_status"[m
[31m-                            widget="badge"[m
[31m-                            decoration-success="six_hour_class_status == 'valid'"[m
[31m-                            decoration-danger="six_hour_class_status == 'expired'"[m
[31m-                            invisible="is_company"/>[m
[31m-                    <field name="hazard_notification_class_date" invisible="is_company"/>[m
[31m-                    <field name="hazard_notification_class_expiry_date" invisible="is_company"/>[m
[31m-                    <field name="hazard_notification_class_status" [m
[31m-                            widget="badge"[m
[31m-                            decoration-success="hazard_notification_class_status == 'valid'"[m
[31m-                            decoration-danger="hazard_notification_class_status == 'expired'" [m
[31m-                            invisible="is_company"/>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 添加頁面 -->[m
[31m-                <xpath expr="//page[@name='internal_notes']" position="after">[m
[31m-                    <page string="辦證提交資料" name="document" invisible="is_company">[m
[31m-                        <group>[m
[31m-                            <group>[m
[31m-                                <field name="id_photo_front" widget="image" class="new_oe_avatar"/>[m
[31m-                                <field name="id_photo_back" widget="image" class="new_oe_avatar"/>[m
[31m-                                <field name="mug_shot" widget="image" class="new_oe_avatar"/>[m
[31m-                                <field name="life_mug_shot_01" widget="image" class="new_oe_avatar"/>[m
[31m-                                <field name="life_mug_shot_02" widget="image" class="new_oe_avatar"/>[m
[31m-                                <field name="life_mug_shot_03" widget="image" class="new_oe_avatar"/>[m
[31m-                                <field name="life_mug_shot_04" widget="image" class="new_oe_avatar"/>[m
[31m-                            </group>[m
[31m-                            <group>[m
[31m-                                <field name="construction_six_hour"/>[m
[31m-                                <field name="physical_examination_form"/>[m
[31m-                                <field name="labor_insurance"/>[m
[31m-                                <field name="hazzard_notification"/>[m
[31m-                                <field name="personal_date_consent_form"/>[m
[31m-                                <field name="security_cutoff_letter"/>[m
[31m-                                <field name="health_commitment"/>[m
[31m-                                <field name="foreigner_entry_certificate"/>[m
[31m-                            </group>[m
[31m-                        </group>[m
[31m-                    </page>[m
[31m-                </xpath>[m
[31m-                <xpath expr="//notebook" position="inside">[m
[31m-                    <page string="入場資訊">[m
[31m-                        <field name="no_entry_reason_ids">[m
[31m-                            <tree editable="bottom">[m
[31m-                                <field name="date" width="33%"/>[m
[31m-                                <field name="reason" width="67%"/>[m
[31m-                            </tree>[m
[31m-                        </field>[m
[31m-                    </page>[m
[31m-                </xpath>[m
[31m-[m
[31m-                <!-- 隱藏 type 字段，但保留其值，並更改為聯絡人 -->[m
[31m-                <field name="type" position="attributes">[m
[31m-                    <attribute name="invisible">1</attribute>[m
[31m-                    <attribute name="force_save">1</attribute>[m
[31m-                </field>[m
[31m-            </field>[m
[31m-        </record>[m
[31m-[m
[31m-        <!-- 在聯絡人清單裡顯示新欄位 -->[m
[31m-        <record id="view_partner_tree_inherit" model="ir.ui.view">[m
[31m-            <field name="name">res.partner.tree.inherit</field>[m
[31m-            <field name="model">res.partner</field>[m
[31m-            <field name="inherit_id" ref="base.view_partner_tree" />[m
[31m-            <field name="arch" type="xml">[m
[31m-                <xpath expr="//tree/field[@name='display_name']" position="after">[m
[31m-                    <field name="new_function" optional="show"/>[m
[31m-                    <field name="gender" optional="show"/>[m
[31m-                    <field name="id_number" optional="show"/>[m
[31m-                    <field name="blood_type" optional="show"/>[m
[31m-                    <field name="birthday" optional="show"/>[m
[31m-                    <field name="emergency_contact" optional="show"/>[m
[31m-                    <field name="emergency_relationship" optional="show"/>[m
[31m-                    <field name="emergency_number" optional="show"/>[m
[31m-                    <field name="admission" optional="show"/>[m
[31m-                    <field name="main_contractor" optional="show"/>[m
[31m-                    <field name="sub_contractor" optional="show"/>[m
[31m-                    <field name="under_contractor" optional="show"/>[m
[31m-                    <field name="work_type" optional="show"/>[m
[31m-                    <field name="industrial_safety_personnel" optional="show"/>[m
[31m-                    <field name="industrial_safety_mobile" optional="show"/>[m
[31m-                    <field name="physical_examination_date" optional="show"/>[m
[31m-                    <field name="Six_hour_class_date" optional="show"/>[m
[31m-                    <field name="hazard_notification_class_date" optional="show"/>[m
[31m-                </xpath>[m
[31m-            </field>[m
[31m-        </record>[m
[31m-    </data>[m
[31m-</odoo>[m
\ No newline at end of file[m
[1mdiff --git a/New_res_partner/views/new_res_partner_work_type_view.xml b/New_res_partner/views/new_res_partner_work_type_view.xml[m
[1mdeleted file mode 100644[m
[1mindex 3c95d2a..0000000[m
[1m--- a/New_res_partner/views/new_res_partner_work_type_view.xml[m
[1m+++ /dev/null[m
[36m@@ -1,29 +0,0 @@[m
[31m-<?xml version="1.0" encoding="utf-8"?>[m
[31m-<odoo>[m
[31m-    <data>[m
[31m-        <!-- 树状视图 -->[m
[31m-        <record id="view_new_res_partner_worktype_tree" model="ir.ui.view">[m
[31m-            <field name="name">new.res.partner.work.type.tree</field>[m
[31m-            <field name="model">new.res.partner.work.type</field>[m
[31m-            <field name="arch" type="xml">[m
[31m-                <tree string="工種列表">[m
[31m-                    <field name="name"/>[m
[31m-                </tree>[m
[31m-            </field>[m
[31m-        </record>[m
[31m-[m
[31m-        <!-- 动作 -->[m
[31m-        <record id="action_new_res_partner_work_type" model="ir.actions.act_window">[m
[31m-            <field name="name">工種</field>[m
[31m-            <field name="res_model">new.res.partner.work.type</field>[m
[31m-            <field name="view_mode">tree</field>[m
[31m-        </record>[m
[31m-[m
[31m-        <!-- 菜单项 -->[m
[31m-        <menuitem id="menu_new_res_partner_work_type"[m
[31m-                  name="工種"[m
[31m-                  action="action_new_res_partner_work_type"[m
[31m-                  parent="contacts.res_partner_menu_config"[m
[31m-                  sequence="0"/>[m
[31m-    </data>[m
[31m-</odoo>[m
\ No newline at end of file[m
[1mdiff --git a/__init__.py b/__init__.py[m
[1mnew file mode 100644[m
[1mindex 0000000..d67ec9a[m
[1m--- /dev/null[m
[1m+++ b/__init__.py[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m# -*- coding: utf-8 -*-[m[41m[m
[32m+[m[32mfrom . import models[m[41m[m
[32m+[m[32mfrom . import controllers[m[41m[m
[32m+[m[32mfrom . import utils[m
\ No newline at end of file[m
[1mdiff --git a/__manifest__.py b/__manifest__.py[m
[1mnew file mode 100644[m
[1mindex 0000000..f0507d0[m
[1m--- /dev/null[m
[1m+++ b/__manifest__.py[m
[36m@@ -0,0 +1,27 @@[m
[32m+[m[32m{[m[41m[m
[32m+[m[32m    'name': '漢唐集成缺失記錄',[m[41m[m
[32m+[m[32m    'version': '17.0.0.1',[m[41m[m
[32m+[m[32m    'category': 'APP',[m[41m[m
[32m+[m[32m    'summary': 'HTPOC 漢唐集成缺失記錄',[m[41m[m
[32m+[m[32m    'description': 'Module for managing missing records',[m[41m[m
[32m+[m[32m    'depends': ['base','web','mail','New_res_partner','sms'],[m[41m[m
[32m+[m[32m    'license': 'LGPL-3',[m[41m[m
[32m+[m[32m    'data': [[m[41m[m
[32m+[m[32m        'security/ir.model.access.csv',[m[41m[m
[32m+[m[32m        'views/htpoc_classification_views.xml',[m[41m[m
[32m+[m[32m        'views/htpoc_missingrecords.xml',[m[41m[m
[32m+[m[32m        'views/htpoc_missingrecords_type.xml',[m[41m[m
[32m+[m[32m        'views/classification_level.xml',[m[41m[m
[32m+[m[32m        'views/beforeafterimage.xml',[m[41m[m
[32m+[m[32m        'views/users.xml',[m[41m[m
[32m+[m[32m        #'data/res_users_data.xml',[m[41m[m
[32m+[m[41m            [m
[32m+[m[41m[m
[32m+[m[32m        # 'views/users.xml',[m[41m[m
[32m+[m[32m        'views/htpoc_menu.xml',[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    ],[m[41m[m
[32m+[m[32m    'icon': '/HTPOC/static/description/icon.png',[m[41m[m
[32m+[m[32m    'installable': True,[m[41m[m
[32m+[m[32m    'application': True,[m[41m[m
[32m+[m[32m}[m[41m[m
[1mdiff --git a/__pycache__/__init__.cpython-310.pyc b/__pycache__/__init__.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..70b623a[m
Binary files /dev/null and b/__pycache__/__init__.cpython-310.pyc differ
[1mdiff --git a/controllers/__init__.py b/controllers/__init__.py[m
[1mnew file mode 100644[m
[1mindex 0000000..1ed1d7a[m
[1m--- /dev/null[m
[1m+++ b/controllers/__init__.py[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mfrom . import htpoc_missingrecords, htpoc_missingrecords_level[m
\ No newline at end of file[m
[1mdiff --git a/controllers/__pycache__/__init__.cpython-310.pyc b/controllers/__pycache__/__init__.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..d416077[m
Binary files /dev/null and b/controllers/__pycache__/__init__.cpython-310.pyc differ
[1mdiff --git a/New_res_partner/__pycache__/__init__.cpython-310.pyc:Zone.Identifier b/controllers/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1mrename to controllers/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1mdiff --git a/New_res_partner/__init__.py:Zone.Identifier b/controllers/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/__init__.py:Zone.Identifier[m
[1mrename to controllers/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/custom_employee_badge/__init__.py:Zone.Identifier b/controllers/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from custom_employee_badge/__init__.py:Zone.Identifier[m
[1mrename to controllers/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc b/controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..7c6ad2e[m
Binary files /dev/null and b/controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc differ
[1mdiff --git a/New_res_partner/__init__.py:Zone.Identifier:Zone.Identifier b/controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/__init__.py:Zone.Identifier:Zone.Identifier[m
[1mrename to controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier[m
[1mdiff --git a/New_res_partner/__manifest__.py:Zone.Identifier b/controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/__manifest__.py:Zone.Identifier[m
[1mrename to controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/custom_employee_badge/__manifest__.py:Zone.Identifier b/controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from custom_employee_badge/__manifest__.py:Zone.Identifier[m
[1mrename to controllers/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc b/controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..f75993d[m
Binary files /dev/null and b/controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc differ
[1mdiff --git a/New_res_partner/__manifest__.py:Zone.Identifier:Zone.Identifier b/controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/__manifest__.py:Zone.Identifier:Zone.Identifier[m
[1mrename to controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc:Zone.Identifier[m
[1mdiff --git a/New_res_partner/models/__init__.py:Zone.Identifier b/controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__init__.py:Zone.Identifier[m
[1mrename to controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/custom_employee_badge/__pycache__/__init__.cpython-310.pyc:Zone.Identifier b/controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from custom_employee_badge/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1mrename to controllers/__pycache__/htpoc_missingrecords_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/controllers/htpoc_missingrecords.py b/controllers/htpoc_missingrecords.py[m
[1mnew file mode 100644[m
[1mindex 0000000..0ea341a[m
[1m--- /dev/null[m
[1m+++ b/controllers/htpoc_missingrecords.py[m
[36m@@ -0,0 +1,20 @@[m
[32m+[m[32mimport json[m[41m[m
[32m+[m[32mimport requests[m[41m[m
[32m+[m[41m[m
[32m+[m[32mfrom odoo import http[m[41m[m
[32m+[m[32mfrom ..utils.authutils import authenticate[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass Htpoc_missingrecords(http.Controller):[m[41m[m
[32m+[m	[32m@http.route('/healthcheck', auth='public', methods=['GET', 'POST'])[m[41m[m
[32m+[m	[32mdef healthcheck(self, **kw):[m[41m[m
[32m+[m		[32mreturn "IT Works"[m[41m[m
[32m+[m	[32m@http.route('/xyz', auth='user')[m[41m[m
[32m+[m	[32mdef xyz(self, **kw):[m[41m[m
[32m+[m		[32mreturn "This is accessible for authenticated user"[m[41m[m
[32m+[m[41m[m
[32m+[m	[32m@http.route('/entries', auth='public')[m[41m[m
[32m+[m	[32m@authenticate[m[41m[m
[32m+[m	[32mdef entries(self, **kw):[m[41m[m
[32m+[m		[32mresponse = requests.get("https://api.publicapis.org/entries")[m[41m[m
[32m+[m		[32mreturn json.dumps(response.json())[m[41m[m
[1mdiff --git a/controllers/htpoc_missingrecords_level.py b/controllers/htpoc_missingrecords_level.py[m
[1mnew file mode 100644[m
[1mindex 0000000..c8e1261[m
[1m--- /dev/null[m
[1m+++ b/controllers/htpoc_missingrecords_level.py[m
[36m@@ -0,0 +1,115 @@[m
[32m+[m[32mimport json[m[41m[m
[32m+[m[41m[m
[32m+[m[32mfrom odoo import http[m[41m[m
[32m+[m[32mfrom odoo.http import request, Response[m[41m[m
[32m+[m[41m[m
[32m+[m[32mfrom ..utils.authutils import authenticate[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass HtpocClassificationController(http.Controller):[m[41m[m
[32m+[m[32m    @http.route('/classification_level', auth="public", methods=['GET'])[m[41m[m
[32m+[m[32m    @authenticate[m[41m[m
[32m+[m[32m    def get_classification_level(self, **kwargs):[m[41m[m
[32m+[m[32m        levels = request.env['classification_level'].search([])[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        classification_levels = [][m[41m[m
[32m+[m[32m        for level in levels:[m[41m[m
[32m+[m[32m            classification_levels.append({[m[41m[m
[32m+[m[32m                'id': level.id,[m[41m[m
[32m+[m[32m                'name': level.name,[m[41m[m
[32m+[m[32m                # 'description': level.description,[m[41m[m
[32m+[m[32m                'level': level.level[m[41m[m
[32m+[m[32m            })[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        return Response(json.dumps(classification_levels), content_type="application/json")[m[41m[m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[32m    @http.route('/classification_level/<int:level_id>', auth="public", methods=['GET'])[m[41m[m
[32m+[m[32m    @authenticate[m[41m[m
[32m+[m[32m    def get_classification_level_by_id(self, level_id, **kwargs):[m[41m[m
[32m+[m[32m        try:[m[41m[m
[32m+[m[32m            level = request.env['classification_level'].browse(level_id)[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            response_data = {[m[41m[m
[32m+[m[32m                'id': level.id,[m[41m[m
[32m+[m[32m                'name': level.name,[m[41m[m
[32m+[m[32m                'level': level.level[m[41m[m
[32m+[m[32m            }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            return Response(json.dumps(response_data), content_type="application/json")[m[41m[m
[32m+[m[32m        except Exception as e:[m[41m[m
[32m+[m[32m            return Response(json.dumps({'error': 'something went wrong', 'error_detail': str(e)}), status=500)[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m    @http.route('/classification_level', auth="public", methods=['POST'], csrf=False)[m[41m[m
[32m+[m[32m    @authenticate[m[41m[m
[32m+[m[32m    def create_level(self, **kwargs):[m[41m[m
[32m+[m[32m        try:[m[41m[m
[32m+[m[32m            request_data = json.loads(request.httprequest.data.decode("utf-8"))[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            name = request_data.get('name')[m[41m[m
[32m+[m[32m            level_value = request_data.get('level')[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            if not all([name, level_value]):[m[41m[m
[32m+[m[32m                return Response("Bad Request: name and level are required", status=400)[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            check_level_exist = request.env['classification_level'].search([('name', '=', name)])[m[41m[m
[32m+[m[32m            if check_level_exist:[m[41m[m
[32m+[m[32m                return Response(f"level with this name ({name}) is already exist!", status=400)[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            new_level = request.env['classification_level'].create({[m[41m[m
[32m+[m[32m                'name': name,[m[41m[m
[32m+[m[32m                'level': str(level_value),[m[41m[m
[32m+[m[32m            })[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            response = json.dumps({'id': new_level.id, 'name': new_level.name, 'level': new_level.level})[m[41m[m
[32m+[m[32m            return Response(response, content_type="application/json")[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        except Exception as e:[m[41m[m
[32m+[m[32m            return Response(f"There is error occured: {str(e)}", status=500)[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m    @http.route('/classification_level/<int:level_id>', auth="public", methods=['PUT'], csrf=False)[m[41m[m
[32m+[m[32m    @authenticate[m[41m[m
[32m+[m[32m    def update_level(self, level_id, **kwargs):[m[41m[m
[32m+[m[32m        try:[m[41m[m
[32m+[m[32m            # 根據 ID 獲取記錄[m[41m[m
[32m+[m[32m            level = request.env['classification_level'].browse(level_id)[m[41m[m
[32m+[m[32m            if not level.exists():[m[41m[m
[32m+[m[32m                return Response("Record not found", status=404)[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            # 解析請求數據[m[41m[m
[32m+[m[32m            updated_data = json.loads(request.httprequest.data.decode("utf-8"))[m[41m[m
[32m+[m[32m            name = updated_data.get('name')[m[41m[m
[32m+[m[32m            level_value = updated_data.get('level')[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            # 更新記錄[m[41m[m
[32m+[m[32m            level.write({[m[41m[m
[32m+[m[32m                'name': name,[m[41m[m
[32m+[m[32m                'level': level_value  # 確保 level 是正確的值[m[41m[m
[32m+[m[32m            })[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            # 構建響應數據[m[41m[m
[32m+[m[32m            response_data = {[m[41m[m
[32m+[m[32m                'id': level.id,[m[41m[m
[32m+[m[32m                'name': level.name,[m[41m[m
[32m+[m[32m                'level': level.level[m[41m[m
[32m+[m[32m            }[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            response = json.dumps(response_data)[m[41m[m
[32m+[m[32m            return Response(response, content_type="application/json")[m[41m[m
[32m+[m[32m        except Exception as e:[m[41m[m
[32m+[m[32m            return Response(f"There is error occurred: {str(e)}", status=500)[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m    @http.route('/classification_level/<int:level_id>', auth="public", methods=['DELETE'], csrf=False)[m[41m[m
[32m+[m[32m    @authenticate[m[41m[m
[32m+[m[32m    def delete_level(self, level_id, **kwargs):[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m        # 根據 ID 獲取記錄[m[41m[m
[32m+[m[32m        level = request.env['classification_level'].browse(level_id)[m[41m[m
[32m+[m[32m        level.unlink()[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        response_data = {[m[41m[m
[32m+[m[32m            'id': level.id,[m[41m[m
[32m+[m[32m            'message':f"編號 #{level.id} 缺失等級已刪除"[m[41m[m
[32m+[m[32m        }[m[41m[m
[32m+[m[41m            [m
[32m+[m[41m           [m
[32m+[m[32m        return Response(json.dumps(response_data), content_type="application/json")[m[41m[m
[1mdiff --git a/custom_employee_badge/__init__.py b/custom_employee_badge/__init__.py[m
[1mdeleted file mode 100644[m
[1mindex 52980b4..0000000[m
[1m--- a/custom_employee_badge/__init__.py[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-# from . import models[m
\ No newline at end of file[m
[1mdiff --git a/custom_employee_badge/__manifest__.py b/custom_employee_badge/__manifest__.py[m
[1mdeleted file mode 100644[m
[1mindex 026eb17..0000000[m
[1m--- a/custom_employee_badge/__manifest__.py[m
[1m+++ /dev/null[m
[36m@@ -1,13 +0,0 @@[m
[31m-{[m
[31m-    'name': 'Custom Vertical Employee Badge 直向識別證',[m
[31m-    'version': '17.0.1.0',[m
[31m-    'category': 'Human Resources',[m
[31m-    'summary': 'Customizes employee badge to vertical layout',[m
[31m-    'depends': ['hr'],[m
[31m-    'data': [[m
[31m-        'views/report_employee_badge_vertical.xml',[m
[31m-    ],[m
[31m-    [m
[31m-    'installable': True,[m
[31m-    'application': False,[m
[31m-}[m
[1mdiff --git a/custom_employee_badge/__pycache__/__init__.cpython-310.pyc b/custom_employee_badge/__pycache__/__init__.cpython-310.pyc[m
[1mdeleted file mode 100644[m
[1mindex a5938ba..0000000[m
Binary files a/custom_employee_badge/__pycache__/__init__.cpython-310.pyc and /dev/null differ
[1mdiff --git a/custom_employee_badge/views/report_employee_badge_vertical.xml b/custom_employee_badge/views/report_employee_badge_vertical.xml[m
[1mdeleted file mode 100644[m
[1mindex 60bc058..0000000[m
[1m--- a/custom_employee_badge/views/report_employee_badge_vertical.xml[m
[1m+++ /dev/null[m
[36m@@ -1,59 +0,0 @@[m
[31m-<?xml version="1.0" encoding="UTF-8"?>[m
[31m-<odoo>[m
[31m-    <template id="print_employee_badge_corrected" inherit_id="hr.print_employee_badge">[m
[31m-        <xpath expr="." position="replace">[m
[31m-            <t t-name="hr.print_employee_badge">[m
[31m-                <t t-call="web.basic_layout">[m
[31m-                    <div class="page">[m
[31m-                        <t t-foreach="docs" t-as="employee">[m
[31m-                            <div class="col-md-6">[m
[31m-                                <table style="width:190pt; height:295pt; border: 1pt solid black; border-collapse:separate; border-radius:8pt; margin:1pt">[m
[31m-                                    <!-- Logo 區域 -->[m
[31m-                                    <tr style="height:25%"> <!-- 调整 Logo 区域高度 -->[m
[31m-                                        <td align="center" valign="center">[m
[31m-                                            <span t-if="employee.company_id.logo">[m
[31m-                                                <img t-att-src="image_data_uri(employee.company_id.logo)" style="max-height:50pt;max-width:90%; margin-top:5pt;" alt="Company Logo"/> <!-- 调整 Logo 的 margin-top 以向下移动 -->[m
[31m-                                            </span>[m
[31m-                                        </td>[m
[31m-                                    </tr>[m
[31m-                                    <!-- 員工照片 -->[m
[31m-                                    <tr style="height:40%;"> <!-- 增加照片区域的高度比例 -->[m
[31m-                                        <td align="center" valign="top">[m
[31m-                                            <img t-att-src="image_data_uri(employee.image_1920)" style="max-height:110pt;max-width:100%; margin-top:0pt" alt="Employee Image"/> <!-- 调整照片大小 -->[m
[31m-                                        </td>[m
[31m-                                    </tr>[m
[31m-                                    <!-- 員工姓名和職位 -->[m
[31m-                                    <tr style="height:15%">[m
[31m-                                        <td align="center">[m
[31m-                                            <div style="font-size:14pt; margin-bottom:2pt;" align="center">[m
[31m-                                                <span t-field="employee.name"/>[m
[31m-                                            </div>[m
[31m-                                            <div align="center" style="font-size:10pt;">[m
[31m-                                                <span t-field="employee.job_title"/>[m
[31m-                                            </div>[m
[31m-                                        </td>[m
[31m-                                    </tr>[m
[31m-                                    <!-- 條碼 -->[m
[31m-                                    <tr style="height:30%">[m
[31m-                                        <td align="center" valign="bottom">[m
[31m-                                            <div t-if="employee.barcode" [m
[31m-                                                    t-field="employee.barcode" [m
[31m-                                                    t-options="{[m
[31m-                                                    'widget': 'barcode', [m
[31m-                                                    'type': 'Code128',[m
[31m-                                                    'width': 1600, [m
[31m-                                                    'height': 300, [m
[31m-                                                    'img_style': 'max-height:70pt; max-width:100%; width:100% !important;', [m
[31m-                                                    'img_align': 'center'[m
[31m-                                                }"/>[m
[31m-                                        </td>[m
[31m-                                    </tr>[m
[31m-                                </table>[m
[31m-                            </div>[m
[31m-                        </t>[m
[31m-                    </div>[m
[31m-                </t>[m
[31m-            </t>[m
[31m-        </xpath>[m
[31m-    </template>[m
[31m-</odoo>[m
\ No newline at end of file[m
[1mdiff --git a/data/res_users_data.xml b/data/res_users_data.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..7a1fffc[m
[1m--- /dev/null[m
[1m+++ b/data/res_users_data.xml[m
[36m@@ -0,0 +1,10 @@[m
[32m+[m[32m<?xml version="1.0" encoding="UTF-8"?>[m[41m[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <record id="field_res_users_auth_token" model="ir.model.fields">[m[41m[m
[32m+[m[32m        <field name="name">auth_token</field>[m[41m[m
[32m+[m[32m        <field name="model">res.users</field>[m[41m[m
[32m+[m[32m        <field name="field_description">Authentication Token</field>[m[41m[m
[32m+[m[32m        <field name="ttype">char</field>[m[41m[m
[32m+[m[32m    </record>[m[41m[m
[32m+[m[32m</odoo>[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/New_res_partner/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier b/data/res_users_data.xml:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1mrename to data/res_users_data.xml:Zone.Identifier[m
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner.cpython-310.pyc:Zone.Identifier b/data/res_users_data.xml:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/new_res_partner.cpython-310.pyc:Zone.Identifier[m
[1mrename to data/res_users_data.xml:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/custom_employee_badge/views/report_employee_badge_vertical.xml:Zone.Identifier b/data/res_users_data.xml:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from custom_employee_badge/views/report_employee_badge_vertical.xml:Zone.Identifier[m
[1mrename to data/res_users_data.xml:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__init__.py b/models/__init__.py[m
[1mnew file mode 100644[m
[1mindex 0000000..6b3a396[m
[1m--- /dev/null[m
[1m+++ b/models/__init__.py[m
[36m@@ -0,0 +1,10 @@[m
[32m+[m[32mfrom . import htpoc_missingrecords[m[41m[m
[32m+[m[32mfrom . import htpoc_missingrecords_type[m[41m[m
[32m+[m[32mfrom . import htpoc_classification[m[41m[m
[32m+[m[32mfrom . import classification_level[m[41m[m
[32m+[m[32mfrom . import beforeafterimage[m[41m[m
[32m+[m[32mfrom . import users[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/models/__pycache__/__init__.cpython-310.pyc b/models/__pycache__/__init__.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..2d0f727[m
Binary files /dev/null and b/models/__pycache__/__init__.cpython-310.pyc differ
[1mdiff --git a/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier b/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_category_id.cpython-310.pyc:Zone.Identifier b/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/new_res_partner_category_id.cpython-310.pyc:Zone.Identifier[m
[1mrename to models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_company.cpython-310.pyc:Zone.Identifier b/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/new_res_partner_company.cpython-310.pyc:Zone.Identifier[m
[1mrename to models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier b/models/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/models/__pycache__/beforeafterimage.cpython-310.pyc b/models/__pycache__/beforeafterimage.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..1fc76c3[m
Binary files /dev/null and b/models/__pycache__/beforeafterimage.cpython-310.pyc differ
[1mdiff --git a/models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier b/models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_function.cpython-310.pyc:Zone.Identifier b/models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/new_res_partner_function.cpython-310.pyc:Zone.Identifier[m
[1mrename to models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_safety.cpython-310.pyc:Zone.Identifier b/models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/new_res_partner_safety.cpython-310.pyc:Zone.Identifier[m
[1mrename to models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier b/models/__pycache__/beforeafterimage.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/models/__pycache__/classification_level.cpython-310.pyc b/models/__pycache__/classification_level.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..adcc616[m
Binary files /dev/null and b/models/__pycache__/classification_level.cpython-310.pyc differ
[1mdiff --git a/models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier b/models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_title.cpython-310.pyc:Zone.Identifier b/models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/new_res_partner_title.cpython-310.pyc:Zone.Identifier[m
[1mrename to models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/New_res_partner/models/__pycache__/new_res_partner_work_type.cpython-310.pyc:Zone.Identifier b/models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/__pycache__/new_res_partner_work_type.cpython-310.pyc:Zone.Identifier[m
[1mrename to models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier b/models/__pycache__/classification_level.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/models/__pycache__/htpoc_classification.cpython-310.pyc b/models/__pycache__/htpoc_classification.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..25bbcf5[m
Binary files /dev/null and b/models/__pycache__/htpoc_classification.cpython-310.pyc differ
[1mdiff --git a/models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier b/models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/New_res_partner/models/new_res_partner.py:Zone.Identifier b/models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/new_res_partner.py:Zone.Identifier[m
[1mrename to models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/New_res_partner/models/new_res_partner_company.py:Zone.Identifier b/models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/new_res_partner_company.py:Zone.Identifier[m
[1mrename to models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier b/models/__pycache__/htpoc_classification.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/models/__pycache__/htpoc_missingrecords.cpython-310.pyc b/models/__pycache__/htpoc_missingrecords.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..63f8520[m
Binary files /dev/null and b/models/__pycache__/htpoc_missingrecords.cpython-310.pyc differ
[1mdiff --git a/models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier b/models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/New_res_partner/models/new_res_partner_function.py:Zone.Identifier b/models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/new_res_partner_function.py:Zone.Identifier[m
[1mrename to models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/New_res_partner/models/new_res_partner_work_type.py:Zone.Identifier b/models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/models/new_res_partner_work_type.py:Zone.Identifier[m
[1mrename to models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier b/models/__pycache__/htpoc_missingrecords.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc b/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..bfc6ce7[m
Binary files /dev/null and b/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc differ
[1mdiff --git a/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier b/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/New_res_partner/security/ir.model.access.csv:Zone.Identifier b/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/security/ir.model.access.csv:Zone.Identifier[m
[1mrename to models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/New_res_partner/static/src/css/custom_styles.css:Zone.Identifier b/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/static/src/css/custom_styles.css:Zone.Identifier[m
[1mrename to models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier b/models/__pycache__/htpoc_missingrecords_type.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/models/__pycache__/users.cpython-310.pyc b/models/__pycache__/users.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..07222df[m
Binary files /dev/null and b/models/__pycache__/users.cpython-310.pyc differ
[1mdiff --git a/New_res_partner/views/new_res_partner_company_view.xml:Zone.Identifier b/models/__pycache__/users.cpython-310.pyc:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/views/new_res_partner_company_view.xml:Zone.Identifier[m
[1mrename to models/__pycache__/users.cpython-310.pyc:Zone.Identifier[m
[1mdiff --git a/New_res_partner/views/new_res_partner_function_view.xml:Zone.Identifier b/models/__pycache__/users.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/views/new_res_partner_function_view.xml:Zone.Identifier[m
[1mrename to models/__pycache__/users.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/models/__pycache__/users.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier b/models/__pycache__/users.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/models/beforeafterimage.py b/models/beforeafterimage.py[m
[1mnew file mode 100644[m
[1mindex 0000000..e13a8b5[m
[1m--- /dev/null[m
[1m+++ b/models/beforeafterimage.py[m
[36m@@ -0,0 +1,32 @@[m
[32m+[m[41m[m
[32m+[m[32mfrom odoo import fields, models[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass beforeafterimage(models.Model):[m[41m[m
[32m+[m[32m    _name = "beforeafterimage"[m[41m[m
[32m+[m[32m    _description = "Before & After Image"[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    name = fields.Text(string='改善前說明', required=True)[m[41m[m
[32m+[m[32m    photo_before = fields.Binary(string='改善前照片')[m[41m[m
[32m+[m[32m    name2 = fields.Text(string='改善後說明', required=True)[m[41m[m
[32m+[m[32m    photo_after = fields.Binary(string='改善後照片')[m[41m[m
[32m+[m[32m    missing_record_id = fields.Many2one('htpoc.missingrecords', string='Missing Record')[m[41m[m
[32m+[m[32m    # b_description = fields.Text(help="請寫下改善照片說明", string="改善前照片說明")[m[41m[m
[32m+[m[32m    # a_description = fields.Text(help="請寫下改善照片說明", string="改善後照片說明")[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    def action_save_and_close(self):[m[41m[m
[32m+[m[32m        return {'type': 'ir.actions.act_window_close'}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def action_save_and_new(self):[m[41m[m
[32m+[m[32m        return {[m[41m[m
[32m+[m[32m            'type': 'ir.actions.act_window',[m[41m[m
[32m+[m[32m            'res_model': 'beforeafterimage',[m[41m[m
[32m+[m[32m            'view_mode': 'form',[m[41m[m
[32m+[m[32m            'view_type': 'form',[m[41m[m
[32m+[m[32m            'target': 'new',[m[41m[m
[32m+[m[32m            'context': {'form_view_initial_mode': 'edit'},[m[41m[m
[32m+[m[32m        }[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/models/classification_level.py b/models/classification_level.py[m
[1mnew file mode 100644[m
[1mindex 0000000..6b2ad3a[m
[1m--- /dev/null[m
[1m+++ b/models/classification_level.py[m
[36m@@ -0,0 +1,11 @@[m
[32m+[m[32mfrom odoo import models, fields[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass HtpocClassification(models.Model):[m[41m[m
[32m+[m[32m    _name = "classification_level"[m[41m[m
[32m+[m[32m    _description = "Classification Level"[m[41m[m
[32m+[m[32m    _order = "sequence, name"[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    name = fields.Text(string="缺失等級代號", required=True)[m[41m[m
[32m+[m[32m    sequence = fields.Integer(string="Sequence", default=10)[m[41m[m
[32m+[m[32m    description = fields.Text(string="缺失等級說明")[m[41m[m
[32m+[m[32m    level = fields.Text(string="缺失等級分類說明")[m[41m [m
\ No newline at end of file[m
[1mdiff --git a/models/htpoc_classification.py b/models/htpoc_classification.py[m
[1mnew file mode 100644[m
[1mindex 0000000..2c12f69[m
[1m--- /dev/null[m
[1m+++ b/models/htpoc_classification.py[m
[36m@@ -0,0 +1,11 @@[m
[32m+[m[32mfrom odoo import models, fields[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass HtpocClassification(models.Model):[m[41m[m
[32m+[m[32m    _name = "htpoc.classification"[m[41m[m
[32m+[m[32m    _description = "Htpoc Classification"[m[41m[m
[32m+[m[32m    _order = "sequence, name"[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    name = fields.Char(string="缺失等級分類", required=True)[m[41m[m
[32m+[m[32m    sequence = fields.Integer(string="Sequence", default=10)[m[41m[m
[32m+[m[32m    description = fields.Text(string="缺失等級分類")[m[41m[m
[32m+[m[32m    color = fields.Char(string="缺失分類顏色")  # Char field for storing emoji color[m
\ No newline at end of file[m
[1mdiff --git a/models/htpoc_missingrecords.py b/models/htpoc_missingrecords.py[m
[1mnew file mode 100644[m
[1mindex 0000000..ed7eeda[m
[1m--- /dev/null[m
[1m+++ b/models/htpoc_missingrecords.py[m
[36m@@ -0,0 +1,168 @@[m
[32m+[m[32mfrom odoo import models, fields,api[m[41m[m
[32m+[m[32mfrom odoo.exceptions import UserError[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass HtpocMissingRecords(models.Model):[m[41m[m
[32m+[m[32m    _name = 'htpoc.missingrecords'[m[41m[m
[32m+[m[32m    _inherit = ['mail.thread', 'mail.activity.mixin'][m[41m[m
[32m+[m[32m    _description = 'Missing Records'[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    brief = fields.Char(string='缺失簡述', required=True)[m[41m[m
[32m+[m[32m    test123 = fields.Char(string='test123', required=True)[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    contact = fields.Many2one("res.partner", string="聯絡人", copy=False)[m[41m[m
[32m+[m[32m    company = fields.Many2one("res.partner", string='公司名稱',  readonly=True)[m[41m[m
[32m+[m[32m    principal = fields.Many2one("res.partner", string="負責人")[m[41m[m
[32m+[m[32m    phone = fields.Char(string="連絡電話")[m[41m[m
[32m+[m[32m    email = fields.Char(string="電子信箱")[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    floor = fields.Char(string='樓層')[m[41m[m
[32m+[m[32m    pillar = fields.Char(string='柱位')[m[41m[m
[32m+[m[32m    feeback = fields.Char(string='回報')[m[41m[m
[32m+[m[32m    cycle = fields.Char(string='週期')[m[41m[m
[32m+[m[32m    state = fields.Selection([[m[41m[m
[32m+[m[32m        ('initiate', '發起缺失紀錄'),[m[41m[m
[32m+[m[32m        ('in_process', '缺失處理中'),[m[41m[m
[32m+[m[32m        ('completed', '已完成'),[m[41m[m
[32m+[m[32m        ('cancel', "已取消")[m[41m[m
[32m+[m[32m    ], string='狀態', default='initiate')[m[41m[m
[32m+[m[32m    system_name = fields.Many2one("htpoc.missingrecords.type", string="系統")[m[41m[m
[32m+[m[32m    main_contractor = fields.Many2one('new.res.partner.company', string="主承攬商") #主承攬商[m[41m[m
[32m+[m[32m    deputy_contractor = fields.Many2one('new.res.partner.company',string="副承攬商") #副承攬商[m[41m[m
[32m+[m[32m    security_person = fields.Many2one('res.partner', string="工安人員", domain=[('category_id', '=', '工安人員')]) #工安人員[m[41m[m
[32m+[m[32m    security_person_tel = fields.Char(related='security_person.phone',string="工安人員電話") #工安人員電話[m[41m[m
[32m+[m[32m    create_date = fields.Datetime(string="第一次紀錄的時間", readonly=True)  # 第一次紀錄的時間[m[41m[m
[32m+[m[32m    write_date = fields.Datetime(string="最後更新表單的時間", readonly=True)  # 最後更新表單的時間[m[41m[m
[32m+[m[32m    record_date = fields.Datetime("記錄日期時間", default=fields.Datetime.now)  # 記錄日期時間[m[41m[m
[32m+[m[32m    message_ids = fields.One2many('mail.message', 'res_id', string='發送訊息', domain=lambda self: [('model', '=', self._name)], auto_join=True)[m[41m[m
[32m+[m[32m    activity_ids = fields.One2many('mail.activity', 'res_id', string='活動', domain=lambda self: [('res_model', '=', self._name)], auto_join=True)[m[41m[m
[32m+[m[32m    classification = fields.Many2one("htpoc.classification", string="缺失分類")[m[41m[m
[32m+[m[32m    classification_color = fields.Char(related='classification.color',string="分類顏色")[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    classification_level = fields.Many2one("classification_level", string="缺失等級代號")[m[41m[m
[32m+[m[32m    classification_common = fields.Text(related='classification_level.level', string="缺失等級說明") #缺失等級說明[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    penalties = fields.Text(help='Please enter manually', string="罰則") #罰則[m[41m[m
[32m+[m[32m    improve = fields.Text(help='Record of immediate improvement measures on site', string="現場立即改善措施") #現場立即改善措施[m[41m[m
[32m+[m[32m    improveDT = fields.Text(help='Immediate on-site improvement measures recording Datetime', string="改善措施及時間")  #現場立即改善措施[m[41m[m
[32m+[m[32m    sign = fields.Binary(string='缺失人員簽名') #簽名[m[41m[m
[32m+[m[32m    sign2 = fields.Binary(string='驗收人員簽名') #簽名[m[41m[m
[32m+[m[32m    empty = fields.Char(string="")[m[41m[m
[32m+[m[32m    content = fields.Text(help='詳細缺失內容記錄', string="詳細缺失內容") #詳細缺失內容[m[41m[m
[32m+[m[32m    improvement_record_ids = fields.One2many('beforeafterimage', 'missing_record_id', string="改善紀錄")[m[41m[m
[32m+[m[32m    # product_id = fields.Many2one('product.product', string='Product', required=True)[m[41m[m
[32m+[m[41m    [m
[32m+[m[41m[m
[32m+[m[32m    ######## state 狀態變更定義  #########[m[41m[m
[32m+[m[32m    @api.onchange('record_date', 'sign', 'sign2')[m[41m[m
[32m+[m[32m    def _onchange_fields(self):[m[41m[m
[32m+[m[32m        for record in self:[m[41m[m
[32m+[m[32m            if record.create_date and not record.sign and not record.sign2:[m[41m[m
[32m+[m[32m                record.state = 'initiate'[m[41m[m
[32m+[m[32m            if record.sign and not record.sign2:[m[41m[m
[32m+[m[32m                record.state = 'in_process'[m[41m[m
[32m+[m[32m            if record.sign2:[m[41m[m
[32m+[m[32m                record.state = 'completed'[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def write(self, vals):[m[41m[m
[32m+[m[32m        if 'record_date' in vals:[m[41m[m
[32m+[m[32m            vals['create_date'] = vals.get('record_date', fields.Datetime.now())[m[41m[m
[32m+[m[32m            vals['state'] = 'initiate'[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m        if 'sign' in vals and vals['sign']:[m[41m[m
[32m+[m[32m            vals['state'] = 'in_process'[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m        if 'sign2' in vals and vals['sign2']:[m[41m[m
[32m+[m[32m            vals['state'] = 'completed'[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        return super(HtpocMissingRecords, self).write(vals)[m[41m[m
[32m+[m[41m    [m
[32m+[m[41m[m
[32m+[m[32m    # 郵件寄送方法[m[41m[m
[32m+[m[32m    @api.model[m[41m[m
[32m+[m[32m    def create(self, vals):[m[41m[m
[32m+[m[32m        if 'record_date' in vals:[m[41m[m
[32m+[m[32m            vals['create_date'] = vals.get('record_date', fields.Datetime.now())[m[41m[m
[32m+[m[32m            vals['state'] = 'initiate'[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m        record = super(HtpocMissingRecords, self).create(vals)[m[41m[m
[32m+[m[32m        record._log_state_change()[m[41m[m
[32m+[m[32m        return record[m[41m[m
[32m+[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    # 添加創建者為關注者[m[41m[m
[32m+[m[32m    def create(self, vals):[m[41m[m
[32m+[m[32m        record = super(HtpocMissingRecords, self).create(vals)[m[41m[m
[32m+[m[32m        if self.env.user.partner_id:[m[41m[m
[32m+[m[32m            record.message_subscribe(partner_ids=[self.env.user.partner_id.id])[m[41m[m
[32m+[m[32m        return record[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    # 在狀態變化時通知關注者[m[41m[m
[32m+[m[32m    def write(self, vals):[m[41m[m
[32m+[m[32m        res = super(HtpocMissingRecords, self).write(vals)[m[41m[m
[32m+[m[32m        if 'state' in vals:[m[41m[m
[32m+[m[32m            message = f"狀態變更為: {dict(self._fields['state'].selection).get(vals['state'])}"[m[41m[m
[32m+[m[32m            self.message_post(body=message, subtype_xmlid='mail.mt_note')[m[41m[m
[32m+[m[32m        return res[m[41m[m
[32m+[m[41m    [m
[32m+[m[41m[m
[32m+[m[32m    # 自動將當前用戶添加為關注者[m[41m[m
[32m+[m[32m    def create(self, values):[m[41m[m
[32m+[m[32m        record = super().create(values)[m[41m[m
[32m+[m[32m        user_partner_id = self.env.user.partner_id[m[41m[m
[32m+[m[32m        if user_partner_id:[m[41m[m
[32m+[m[32m            record.message_subscribe([user_partner_id.id])[m[41m[m
[32m+[m[32m        return record[m[41m[m
[32m+[m[32m    def create(self, vals):[m[41m[m
[32m+[m[32m        record = super(HtpocMissingRecords, self).create(vals)[m[41m[m
[32m+[m[32m        if self.env.user.partner_id:[m[41m[m
[32m+[m[32m            record.message_subscribe(partner_ids=[self.env.user.partner_id.id])[m[41m[m
[32m+[m[32m        return record[m[41m[m
[32m+[m[41m    [m
[32m+[m[41m[m
[32m+[m[32m    #狀態變更通知[m[41m[m
[32m+[m[32m    def write(self, vals):[m[41m[m
[32m+[m[32m        old_state = self.state[m[41m[m
[32m+[m[32m        res = super(HtpocMissingRecords, self).write(vals)[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        # Only log if state changes[m[41m[m
[32m+[m[32m        if 'state' in vals and vals['state'] != old_state:[m[41m[m
[32m+[m[32m            self._log_state_change()[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        return res[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def _log_state_change(self):[m[41m[m
[32m+[m[32m        for record in self:[m[41m[m
[32m+[m[32m            message = f"狀態變更為: {dict(self._fields['state'].selection).get(record.state)}"[m[41m[m
[32m+[m[32m            record.message_post(body=message, subtype_xmlid='mail.mt_note')[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    # 自動帶出聯絡人聯絡方法[m[41m[m
[32m+[m[32m    @api.onchange('contact')[m[41m[m
[32m+[m[32m    def _onchange_contact(self):[m[41m[m
[32m+[m[32m        if self.contact:[m[41m[m
[32m+[m[32m            self.phone = self.contact.phone[m[41m[m
[32m+[m[32m            self.email = self.contact.email[m[41m[m
[32m+[m[32m            self.security_person = self.contact.industrial_safety_personnel[m[41m[m
[32m+[m[32m            if self.security_person:[m[41m[m
[32m+[m[32m                self.security_person_tel = self.security_person.mobile[m[41m[m
[32m+[m[32m    @api.depends('security_person')[m[41m[m
[32m+[m[32m    def _compute_security_person_tel(self):[m[41m[m
[32m+[m[32m        for record in self:[m[41m[m
[32m+[m[32m            if record.security_person:[m[41m[m
[32m+[m[32m                record.security_person_tel = record.security_person.mobile[m[41m [m
[32m+[m[41m[m
[32m+[m[32m    #聯絡人變更時自動帶出相關資訊[m[41m[m
[32m+[m[32m    @api.onchange('contact')[m[41m[m
[32m+[m[32m    def _onchange_contact(self):[m[41m[m
[32m+[m[32m        if self.contact:[m[41m[m
[32m+[m[32m            # 填充對應欄位[m[41m[m
[32m+[m[32m            self.company = self.contact.parent_id  # 根據 parent_id 填充公司[m[41m[m
[32m+[m[32m            self.principal = self.contact.parent_id[m[41m[m
[32m+[m[32m            self.phone = self.contact.phone[m[41m[m
[32m+[m[32m            self.email = self.contact.email[m[41m[m
[32m+[m[32m        else:[m[41m[m
[32m+[m[32m            self.company = False[m[41m[m
[32m+[m[32m            self.principal = False[m[41m[m
[32m+[m[32m            self.phone = ''[m[41m[m
[32m+[m[32m            self.email = ''[m[41m[m
[32m+[m[41m[m
[32m+[m[41m    [m
\ No newline at end of file[m
[1mdiff --git a/models/htpoc_missingrecords_type.py b/models/htpoc_missingrecords_type.py[m
[1mnew file mode 100644[m
[1mindex 0000000..26a4a1a[m
[1m--- /dev/null[m
[1m+++ b/models/htpoc_missingrecords_type.py[m
[36m@@ -0,0 +1,12 @@[m
[32m+[m[32mfrom odoo import models, fields[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass HtpocMissingRecordsType(models.Model):[m[41m[m
[32m+[m[32m    _name = "htpoc.missingrecords.type"[m[41m[m
[32m+[m[32m    _description = "Htpoc Missingrecords Type 系統"[m[41m[m
[32m+[m[32m    _order = "sequence, name"[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    name = fields.Char(string="系統名稱", required=True)[m[41m[m
[32m+[m[32m    sequence = fields.Integer("Sequence", default=10)[m[41m[m
[32m+[m[32m    description = fields.Text(string="說明")[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    # system_ids=fields.One2many("htpoc.missingrecords","system_name", string="系統")[m[41m[m
[1mdiff --git a/models/users.py b/models/users.py[m
[1mnew file mode 100644[m
[1mindex 0000000..30ac932[m
[1m--- /dev/null[m
[1m+++ b/models/users.py[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32mimport uuid[m[41m[m
[32m+[m[32mfrom odoo import models, fields, api[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass ResUsers(models.Model):[m[41m[m
[32m+[m	[32m_inherit = "res.users"[m[41m[m
[32m+[m[41m[m
[32m+[m	[32mauth_token = fields.Char(string="Authentication Token", copy=False)[m[41m[m
[32m+[m[41m[m
[32m+[m	[32m@api.model[m[41m[m
[32m+[m	[32mdef create(self, vals):[m[41m[m
[32m+[m		[32mvals['auth_token'] = self._auth_token_generator()[m[41m[m
[32m+[m		[32mreturn super(ResUsers, self).create(vals)[m[41m[m
[32m+[m[41m[m
[32m+[m	[32mdef generate_auth_token(self):[m[41m[m
[32m+[m		[32mfor user in self:[m[41m[m
[32m+[m			[32muser.auth_token = self._auth_token_generator()[m[41m[m
[32m+[m		[32mreturn True[m[41m[m
[32m+[m[41m[m
[32m+[m	[32mdef _auth_token_generator(self):[m[41m[m
[32m+[m		[32mreturn str(uuid.uuid4())[m[41m[m
[32m+[m[41m[m
[32m+[m[41m        [m
[32m+[m[41m        [m
\ No newline at end of file[m
[1mdiff --git a/security/ir.model.access.csv b/security/ir.model.access.csv[m
[1mnew file mode 100644[m
[1mindex 0000000..bcd1b15[m
[1m--- /dev/null[m
[1m+++ b/security/ir.model.access.csv[m
[36m@@ -0,0 +1,6 @@[m
[32m+[m[32mid,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink[m[41m[m
[32m+[m[32maccess_htpoc_missingrecords,access_htpoc_missingrecords,model_htpoc_missingrecords,base.group_user,1,1,1,1[m[41m[m
[32m+[m[32maccess_htpoc_missingrecords_type,access_htpoc_missingrecords_type,model_htpoc_missingrecords_type,base.group_user,1,1,1,1[m[41m[m
[32m+[m[32maccess_htpoc_classification,access_htpoc_classification,model_htpoc_classification,base.group_user,1,1,1,1[m[41m[m
[32m+[m[32maccess_classification_level,access_classification_level,model_classification_level,base.group_user,1,1,1,1[m[41m[m
[32m+[m[32maccess_beforeafterimage,access_beforeafterimage,model_beforeafterimage,base.group_user,1,1,1,1[m[41m[m
[1mdiff --git a/static/description/icon.png b/static/description/icon.png[m
[1mnew file mode 100644[m
[1mindex 0000000..d9007b2[m
Binary files /dev/null and b/static/description/icon.png differ
[1mdiff --git a/tests/__init__.py b/tests/__init__.py[m
[1mnew file mode 100644[m
[1mindex 0000000..5eee619[m
[1m--- /dev/null[m
[1m+++ b/tests/__init__.py[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mfrom . import test_htpoc_missingrecords_level,test_missingrecords_level_api[m
\ No newline at end of file[m
[1mdiff --git a/tests/test_htpoc_missingrecords_level.py b/tests/test_htpoc_missingrecords_level.py[m
[1mnew file mode 100644[m
[1mindex 0000000..0e6891b[m
[1m--- /dev/null[m
[1m+++ b/tests/test_htpoc_missingrecords_level.py[m
[36m@@ -0,0 +1,66 @@[m
[32m+[m[32mfrom odoo.tests import TransactionCase[m[41m[m
[32m+[m[32mfrom odoo.exceptions import ValidationError[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass TestClassificationLevel(TransactionCase):[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def setUp(self):[m[41m[m
[32m+[m[32m        super(TestClassificationLevel, self).setUp()[m[41m[m
[32m+[m[32m        self.classification_level_model = self.env['classification_level'][m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def test_create_level(self):[m[41m[m
[32m+[m[32m        level_data = {[m[41m[m
[32m+[m[32m            'name': 'LEVEL 001',[m[41m[m
[32m+[m[32m            'sequence': 10,[m[41m[m
[32m+[m[32m            'description': '缺失等級說明',[m[41m[m
[32m+[m[32m            'level': '缺失等級分類說明',[m[41m[m
[32m+[m[32m        }[m[41m[m
[32m+[m[32m        classification = self.classification_level_model.create(level_data)[m[41m[m
[32m+[m[32m        self.assertEqual(classification.name, 'LEVEL 001')[m[41m[m
[32m+[m[32m        self.assertEqual(classification.sequence, 10)[m[41m[m
[32m+[m[32m        self.assertEqual(classification.description, '缺失等級說明')[m[41m[m
[32m+[m[32m        self.assertEqual(classification.level, '缺失等級分類說明')[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def test_read_level(self):[m[41m[m
[32m+[m[32m        new_level = self.classification_level_model.create({[m[41m[m
[32m+[m[32m            'name': 'LEVEL 002',[m[41m[m
[32m+[m[32m            'sequence': 15,[m[41m[m
[32m+[m[32m            'description': '描述',[m[41m[m
[32m+[m[32m            'level': '分類'[m[41m[m
[32m+[m[32m        })[m[41m[m
[32m+[m[32m        level = new_level.read(['name', 'sequence', 'description', 'level'])[m[41m[m
[32m+[m[32m        self.assertEqual(level[0]['name'], 'LEVEL 002')[m[41m[m
[32m+[m[32m        self.assertEqual(level[0]['sequence'], 15)[m[41m[m
[32m+[m[32m        self.assertEqual(level[0]['description'], '描述')[m[41m[m
[32m+[m[32m        self.assertEqual(level[0]['level'], '分類')[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def test_update_level(self):[m[41m[m
[32m+[m[32m        level = self.classification_level_model.create({[m[41m[m
[32m+[m[32m            'name': 'LEVEL 003',[m[41m[m
[32m+[m[32m            'sequence': 20,[m[41m[m
[32m+[m[32m            'description': '描述',[m[41m[m
[32m+[m[32m            'level': '分類'[m[41m[m
[32m+[m[32m        })[m[41m[m
[32m+[m[32m        level.write({'sequence': 69})[m[41m[m
[32m+[m[32m        self.assertEqual(level.sequence, 69)[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def test_update_with_invalid_value(self):[m[41m[m
[32m+[m[32m        with self.assertRaises(ValidationError) as context:[m[41m[m
[32m+[m[32m            level = self.classification_level_model.create({[m[41m[m
[32m+[m[32m                'name': 'LEVEL 003',[m[41m[m
[32m+[m[32m                'sequence': 70,[m[41m[m
[32m+[m[32m                'description': '描述',[m[41m[m
[32m+[m[32m                'level': '分類'[m[41m[m
[32m+[m[32m            })[m[41m[m
[32m+[m[32m            level.write({'sequence': 150})[m[41m[m
[32m+[m[32m        self.assertEqual(str(context.exception), "Sequence must be less than 100")[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def test_delete_level(self):[m[41m[m
[32m+[m[32m        level = self.classification_level_model.search({[m[41m[m
[32m+[m[32m            'name': 'LEVEL 010',[m[41m[m
[32m+[m[32m            'sequence': 30,[m[41m[m
[32m+[m[32m            'description': '描述',[m[41m[m
[32m+[m[32m            'level': '分類'[m[41m[m
[32m+[m[32m        })[m[41m [m
[32m+[m[32m        level.unlink()[m[41m[m
[32m+[m[32m        check_level = self.classification_level_model.search([('name', '=', 'LEVEL 010')])[m[41m[m
[32m+[m[32m        self.assertFalse(check_level)[m[41m[m
[1mdiff --git a/tests/test_missingrecords_level_api.py b/tests/test_missingrecords_level_api.py[m
[1mnew file mode 100644[m
[1mindex 0000000..4286db2[m
[1m--- /dev/null[m
[1m+++ b/tests/test_missingrecords_level_api.py[m
[36m@@ -0,0 +1,38 @@[m
[32m+[m[32mfrom odoo.tests import HttpCase[m[41m[m
[32m+[m[32mimport requests[m[41m[m
[32m+[m[32mimport json[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass TestMissingRecordsLevelAPI(HttpCase):[m[41m[m
[32m+[m[32m    def setUp(self):[m[41m[m
[32m+[m[32m        super(TestMissingRecordsLevelAPI, self).setUp()[m[41m[m
[32m+[m[32m        self.base_url ="http://localhost:8069"[m[41m[m
[32m+[m[32m        self.auth_token ="7fd48d25-7c2d-4636-b361-110a855db40f"[m[41m[m
[32m+[m[32m        self.session_id = self.authenticate[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    def authenticate(self):[m[41m[m
[32m+[m[32m        url = f'{self.base_url}/web/session/authenticate'[m[41m[m
[32m+[m[32m        headers = {'Content-Type':'application/json'}[m[41m[m
[32m+[m[32m        data = {[m[41m[m
[32m+[m[32m            "jsonrpc": "2.0",[m[41m[m
[32m+[m[32m            "method":"call",[m[41m[m
[32m+[m[32m            "id":1,[m[41m[m
[32m+[m[32m            "method": "login",[m[41m[m
[32m+[m[32m            "params": {[m[41m[m
[32m+[m[32m                "db" : "odoo17_0709",[m[41m[m
[32m+[m[32m                "login" : "admin",[m[41m[m
[32m+[m[32m                "password" : "admin"[m[41m[m
[32m+[m[41m[m
[32m+[m[32m            },[m[41m[m
[32m+[m[32m        }[m[41m[m
[32m+[m[32m        response = requests.post(url, headers=headers, data=json.dumps(data))[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        def test_get_level(self):[m[41m[m
[32m+[m[32m            url = f'{self.base_url}/classification_level'[m[41m[m
[32m+[m[32m            headers = {[m[41m[m
[32m+[m[32m                'Authorization' : self.auth_token,[m[41m[m
[32m+[m[32m                'Cookie' : f'session_id={self.session_id}'[m[41m[m
[32m+[m[32m            }[m[41m[m
[32m+[m[32m            response = requests.get(url, headers=headers)[m[41m[m
[32m+[m[32m            self.assertEqual(response.status_code, 200)[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/utils/__init__.py b/utils/__init__.py[m
[1mnew file mode 100644[m
[1mindex 0000000..94c5365[m
[1m--- /dev/null[m
[1m+++ b/utils/__init__.py[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mfrom . import authutils[m
\ No newline at end of file[m
[1mdiff --git a/utils/__pycache__/__init__.cpython-310.pyc b/utils/__pycache__/__init__.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..3d22caf[m
Binary files /dev/null and b/utils/__pycache__/__init__.cpython-310.pyc differ
[1mdiff --git a/New_res_partner/views/new_res_partner_view.xml:Zone.Identifier b/utils/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/views/new_res_partner_view.xml:Zone.Identifier[m
[1mrename to utils/__pycache__/__init__.cpython-310.pyc:Zone.Identifier[m
[1mdiff --git a/New_res_partner/views/new_res_partner_work_type_view.xml:Zone.Identifier b/utils/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1msimilarity index 100%[m
[1mrename from New_res_partner/views/new_res_partner_work_type_view.xml:Zone.Identifier[m
[1mrename to utils/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mdiff --git a/utils/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier b/utils/__pycache__/__init__.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/utils/__pycache__/authutils.cpython-310.pyc b/utils/__pycache__/authutils.cpython-310.pyc[m
[1mnew file mode 100644[m
[1mindex 0000000..701b400[m
Binary files /dev/null and b/utils/__pycache__/authutils.cpython-310.pyc differ
[1mdiff --git a/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier b/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..a45e1ac[m
[1m--- /dev/null[m
[1m+++ b/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m[ZoneTransfer][m[41m[m
[32m+[m[32mZoneId=3[m[41m[m
[1mdiff --git a/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier:Zone.Identifier b/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..a45e1ac[m
[1m--- /dev/null[m
[1m+++ b/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier:Zone.Identifier[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m[ZoneTransfer][m[41m[m
[32m+[m[32mZoneId=3[m[41m[m
[1mdiff --git a/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier b/utils/__pycache__/authutils.cpython-310.pyc:Zone.Identifier:Zone.Identifier:Zone.Identifier[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/utils/authutils.py b/utils/authutils.py[m
[1mnew file mode 100644[m
[1mindex 0000000..6a67704[m
[1m--- /dev/null[m
[1m+++ b/utils/authutils.py[m
[36m@@ -0,0 +1,25 @@[m
[32m+[m[32mfrom odoo.http import request, Response[m[41m[m
[32m+[m[32mfrom odoo.exceptions import AccessError[m[41m[m
[32m+[m[32mdef authenticate(func):[m[41m[m
[32m+[m	[32mdef wrapper(*args, **kwargs):[m[41m[m
[32m+[m		[32mtry:[m[41m[m
[32m+[m			[32mtoken = request.httprequest.headers.get('Authorization')[m[41m[m
[32m+[m			[32muser = authenticate_user(token)[m[41m[m
[32m+[m[41m[m
[32m+[m			[32mrequest.env = request.env(user=user)[m[41m[m
[32m+[m[41m[m
[32m+[m			[32mkwargs['user'] = user[m[41m[m
[32m+[m[41m[m
[32m+[m			[32mreturn func(*args, **kwargs)[m[41m[m
[32m+[m		[32mexcept AccessError as ae:[m[41m[m
[32m+[m			[32mreturn Response(f"Un-authorized: {(str(ae))}", status=401)[m[41m[m
[32m+[m		[32mexcept Exception as e:[m[41m[m
[32m+[m			[32mreturn Response(f"Bad Request: {str(e)}", status=400)[m[41m[m
[32m+[m	[32mreturn wrapper[m[41m[m
[32m+[m[32mdef authenticate_user(token):[m[41m[m
[32m+[m	[32muser = request.env['res.users'].sudo().search([('auth_token', '=', token)])[m[41m[m
[32m+[m	[32mif not user:[m[41m[m
[32m+[m		[32mraise AccessError("Invalid authentication token")[m[41m[m
[32m+[m	[32mreturn user[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/views/beforeafterimage.xml b/views/beforeafterimage.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..9dac5c3[m
[1m--- /dev/null[m
[1m+++ b/views/beforeafterimage.xml[m
[36m@@ -0,0 +1,39 @@[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <data>[m[41m[m
[32m+[m[32m        <!-- Improvement Record Tree View -->[m[41m[m
[32m+[m[32m        <record id="view_beforeafterimage_tree" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">beforeafterimage.tree</field>[m[41m[m
[32m+[m[32m            <field name="model">beforeafterimage</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <tree string="Improvement Records">[m[41m[m
[32m+[m[32m                    <field name="name" string="改善照片說明"/>[m[41m[m
[32m+[m[32m                    <field name="photo_before" widget="image"/>[m[41m[m
[32m+[m[32m                    <field name="name2" string="改善後說明"/>[m[41m[m
[32m+[m[32m                    <field name="photo_after" widget="image"/>[m[41m[m
[32m+[m[32m                </tree>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Improvement Record Form View -->[m[41m[m
[32m+[m[32m        <record id="view_beforeafterimage_form" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">beforeafterimage.form</field>[m[41m[m
[32m+[m[32m            <field name="model">beforeafterimage</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <form string="改善照片記錄">[m[41m[m
[32m+[m[32m                    <sheet>[m[41m[m
[32m+[m[32m                        <group>[m[41m[m
[32m+[m[32m                            <group string="改善前">[m[41m[m
[32m+[m[32m                                <field name="name" placeholder="請輸入改善前照片說明"/>[m[41m[m
[32m+[m[32m                                <field name="photo_before" widget="image" options="{'size': [300, 300]}" />[m[41m[m
[32m+[m[32m                            </group>[m[41m[m
[32m+[m[32m                            <group string="改善後">[m[41m[m
[32m+[m[32m                                <field name="name2" placeholder="請輸入改善後照片說明"/>[m[41m[m
[32m+[m[32m                                <field name="photo_after" widget="image" options="{'size': [300, 300]}" />[m[41m[m
[32m+[m[32m                            </group>[m[41m[m
[32m+[m[32m                        </group>[m[41m[m
[32m+[m[32m                    </sheet>[m[41m[m
[32m+[m[32m                </form>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[32m    </data>[m[41m[m
[32m+[m[32m</odoo>[m[41m[m
[1mdiff --git a/views/classification_level.xml b/views/classification_level.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..74dd48c[m
[1m--- /dev/null[m
[1m+++ b/views/classification_level.xml[m
[36m@@ -0,0 +1,41 @@[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <data>[m[41m[m
[32m+[m[32m        <!-- Tree View -->[m[41m[m
[32m+[m[32m        <record id="view_classification_level_tree" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">classification_level.tree</field>[m[41m[m
[32m+[m[32m            <field name="model">classification_level</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <tree string="Htpoc Classification Level">[m[41m[m
[32m+[m[32m                    <field name="name" placeholder="缺失等級" required="True"/>[m[41m[m
[32m+[m[32m                    <field name="level" string="缺失等級說明"/>[m[41m[m
[32m+[m[32m                </tree>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Form View -->[m[41m[m
[32m+[m[32m        <record id="view_classification_level_form" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">classification_level.form</field>[m[41m[m
[32m+[m[32m            <field name="model">classification_level</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <form string="Htpoc Classification Level">[m[41m[m
[32m+[m[32m                    <sheet>[m[41m[m
[32m+[m[32m                        <group>[m[41m[m
[32m+[m[32m                            <field name="name" placeholder="缺失等級"/>[m[41m[m
[32m+[m[32m                            <field name="level" string="缺失等級說明"/>[m[41m[m
[32m+[m[32m                        </group>[m[41m[m
[32m+[m[32m                    </sheet>[m[41m[m
[32m+[m[32m                </form>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Action -->[m[41m[m
[32m+[m[32m        <record id="classification_level_action" model="ir.actions.act_window">[m[41m[m
[32m+[m[32m            <field name="name">Htpoc Classification Level 缺失等級</field>[m[41m[m
[32m+[m[32m            <field name="res_model">classification_level</field>[m[41m[m
[32m+[m[32m            <field name="view_mode">tree,form</field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[32m    </data>[m[41m[m
[32m+[m[32m</odoo>[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/views/htpoc_classification_views.xml b/views/htpoc_classification_views.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..278b0e9[m
[1m--- /dev/null[m
[1m+++ b/views/htpoc_classification_views.xml[m
[36m@@ -0,0 +1,48 @@[m
[32m+[m[32m<?xml version="1.0" encoding="utf-8"?>[m[41m[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <data>[m[41m[m
[32m+[m[32m        <!-- Tree View -->[m[41m[m
[32m+[m[32m        <record id="view_htpoc_classification_tree" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">htpoc.classification.tree</field>[m[41m[m
[32m+[m[32m            <field name="model">htpoc.classification</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <tree string="Classification">[m[41m[m
[32m+[m[32m                    <field name="color"/>[m[41m[m
[32m+[m[32m                    <field name="name"/>[m[41m[m
[32m+[m[32m                </tree>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Form View -->[m[41m[m
[32m+[m[32m        <record id="view_htpoc_classification_form" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">htpoc.classification.form</field>[m[41m[m
[32m+[m[32m            <field name="model">htpoc.classification</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <form string="Classification">[m[41m[m
[32m+[m[32m                    <sheet>[m[41m[m
[32m+[m[32m                        <div class="oe_title">[m[41m[m
[32m+[m[32m                            <h1 style="border-bottom: 1px solid #000;">[m[41m[m
[32m+[m[32m                                <field name="name" placeholder="缺失等級分類" required="True" />[m[41m[m
[32m+[m[32m                            </h1>[m[41m[m
[32m+[m[32m                        </div>[m[41m[m
[32m+[m[32m                        <div class="row">[m[41m[m
[32m+[m[32m                            <div class="col-lg-6 ps-lg-0 ms-lg-3">[m[41m[m
[32m+[m[41m[m
[32m+[m[32m                                <field name="color" placeholder="請選擇顏色" widget="char_emoji" />[m[41m[m
[32m+[m[32m                            </div>[m[41m[m
[32m+[m[32m                        </div>[m[41m[m
[32m+[m[32m                            <!-- <field name="name"/> -->[m[41m[m
[32m+[m[32m                            <!-- <field name="color"/> -->[m[41m[m
[32m+[m[32m                    </sheet>[m[41m[m
[32m+[m[32m                </form>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Action -->[m[41m[m
[32m+[m[32m        <record id="htpoc_classification_action" model="ir.actions.act_window">[m[41m[m
[32m+[m[32m            <field name="name">Classifications 缺失類別</field>[m[41m[m
[32m+[m[32m            <field name="res_model">htpoc.classification</field>[m[41m[m
[32m+[m[32m            <field name="view_mode">tree,form</field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[32m    </data>[m[41m[m
[32m+[m[32m</odoo>[m[41m[m
[1mdiff --git a/views/htpoc_menu.xml b/views/htpoc_menu.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..004346f[m
[1m--- /dev/null[m
[1m+++ b/views/htpoc_menu.xml[m
[36m@@ -0,0 +1,34 @@[m
[32m+[m[32m<?xml version="1.0" encoding="UTF-8"?>[m[41m[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <menuitem id="htpoc_missing_records_menu_root" name="HTPOC 缺失紀錄" sequence="0"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    <!-- 缺失紀錄子菜單 -->[m[41m[m
[32m+[m[32m    <menuitem id="htpoc_master_data_menu"[m[41m [m
[32m+[m[32m              name="缺失紀錄"[m[41m [m
[32m+[m[32m              parent="htpoc_missing_records_menu_root"[m[41m[m
[32m+[m[32m              sequence="1"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    <menuitem id="htpoc_missingrecords_action"[m[41m [m
[32m+[m[32m              action="htpoc_action"[m[41m [m
[32m+[m[32m              parent="htpoc_master_data_menu"[m[41m[m
[32m+[m[32m              sequence="1"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    <!-- 配置子菜單 -->[m[41m[m
[32m+[m[32m    <menuitem id="htpoc_menu_configuration" name="配置" parent="htpoc_missing_records_menu_root" sequence="2"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    <menuitem id="htpoc_missingrecords_type_menu_action"[m[41m [m
[32m+[m[32m              action="htpoc_missingrecords_type_action"[m[41m [m
[32m+[m[32m              parent="htpoc_menu_configuration"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    <menuitem id="htpoc_classification_menu_action"[m[41m [m
[32m+[m[32m              action="htpoc_classification_action"[m[41m [m
[32m+[m[32m              parent="htpoc_menu_configuration"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    <menuitem id="classification_level_menu_action"[m[41m [m
[32m+[m[32m              action="classification_level_action"[m[41m[m
[32m+[m[32m              parent="htpoc_menu_configuration"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    <!-- API 配置菜單 -->[m[41m[m
[32m+[m[32m    <menuitem id="api_menu" name="API 配置" parent="htpoc_missing_records_menu_root" sequence="3"/>[m[41m[m
[32m+[m[32m    <menuitem id="api_user_token_menu_action" action="users_token_action" parent="api_menu"/>[m[41m [m
[32m+[m[32m</odoo>[m[41m[m
[1mdiff --git a/views/htpoc_missingrecords.xml b/views/htpoc_missingrecords.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..dd7d763[m
[1m--- /dev/null[m
[1m+++ b/views/htpoc_missingrecords.xml[m
[36m@@ -0,0 +1,140 @@[m
[32m+[m[32m<?xml version="1.0" encoding="utf-8"?>[m[41m[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <data>[m[41m[m
[32m+[m[32m        <!-- Tree View -->[m[41m[m
[32m+[m[32m        <record id="view_htpoc_missingrecords_tree" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">htpoc.missingrecords.tree</field>[m[41m[m
[32m+[m[32m            <field name="model">htpoc.missingrecords</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <tree string="Missing Records List">[m[41m[m
[32m+[m[32m                    <field name="create_date" string="紀錄時間"/>[m[41m[m
[32m+[m[32m                    <field name="cycle" string="週期"/>[m[41m[m
[32m+[m[32m                    <field name="main_contractor" string="主承攬商"/>[m[41m[m
[32m+[m[32m                    <field name="system_name" string="系統"/>[m[41m[m
[32m+[m[32m                    <field name="brief" string="缺失簡述"/>[m[41m[m
[32m+[m[32m                    <field name="classification" string="缺失等級分類"/>[m[41m[m
[32m+[m[32m                    <field name="classification_color" string="缺失分類顏色"/>[m[41m[m
[32m+[m[32m                    <field name="classification_level" string="缺失等級"/>[m[41m[m
[32m+[m[32m                    <field name="company" string="公司名稱"/>[m[41m[m
[32m+[m[32m                    <field name="contact" string="聯絡人"/>[m[41m[m
[32m+[m[32m                    <field name="principal" string="負責人"/>[m[41m[m
[32m+[m[32m                    <field name="state" widget="badge"[m[41m [m
[32m+[m[32m                            decoration-info="state == 'initiate'"[m[41m[m
[32m+[m[32m                            decoration-success="state == 'completed'"[m[41m[m
[32m+[m[32m                            decoration-primary="state == 'in_process'"[m[41m[m
[32m+[m[32m                            decoration-danger="state == 'cancel'"/>[m[41m[m
[32m+[m[32m                </tree>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m        <!-- Form View -->[m[41m[m
[32m+[m[32m        <record id="view_htpoc_missingrecords_form" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">htpoc.missingrecords.form</field>[m[41m[m
[32m+[m[32m            <field name="model">htpoc.missingrecords</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <form string="Missing Records Form">[m[41m[m
[32m+[m[32m                    <header>[m[41m[m
[32m+[m[32m                        <field name="state" widget="statusbar" statusbar_visible="initiate,in_process,completed"/>[m[41m[m
[32m+[m[32m                    </header>[m[41m[m
[32m+[m[32m                    <sheet>[m[41m[m
[32m+[m[32m                        <div>[m[41m[m
[32m+[m[32m                            <h1 style="text-decoration:underline">[m[41m[m
[32m+[m[32m                                <field name="brief" string="缺失簡述" placeholder="缺失簡述" required="True" options="{'no_create': True}" />[m[41m[m
[32m+[m[32m                                <hr />[m[41m[m
[32m+[m[32m                            </h1>[m[41m[m
[32m+[m[32m                            <h2>[m[41m[m
[32m+[m[32m                                <field name="company" string="公司名稱" placeholder="公司名稱" required="True" readonly="1"/>[m[41m[m
[32m+[m[32m                            </h2>[m[41m[m
[32m+[m[32m                        </div>[m[41m[m
[32m+[m[32m                        <div class="row">[m[41m[m
[32m+[m[32m                            <div class="col-lg-6">[m[41m[m
[32m+[m[32m                                <group>[m[41m[m
[32m+[m[32m                                    <field name="contact" string="聯絡人" />[m[41m[m
[32m+[m[32m                                    <field name="phone" string="連絡電話" widget="phone"/>[m[41m[m
[32m+[m[32m                                    <field name="email" string="電子信箱" widget="email"/>[m[41m[m
[32m+[m[32m                                    <field name="system_name" string="系統"/>[m[41m[m
[32m+[m[32m                                    <field name="cycle" string="週期"/>[m[41m[m
[32m+[m[32m                                    <field name="main_contractor" string="主承攬商" options="{'no_create': True}"/>[m[41m[m
[32m+[m[32m                                    <field name="deputy_contractor" string="副承攬商" options="{'no_create': True}"/>[m[41m[m
[32m+[m[32m                                    <field name="security_person"/>[m[41m[m
[32m+[m[32m                                    <field name="security_person_tel" widget="phone"/>[m[41m[m
[32m+[m[32m                                    <field name="create_date" string="紀錄時間"/>[m[41m[m
[32m+[m[32m                                    <field name="write_date" string="最後更新表單的時間"/>[m[41m[m
[32m+[m[32m                                    <field name="content" string="詳細缺失內容" placeholder="請輸入詳細缺失內容"/>[m[41m[m
[32m+[m[41m                                    [m
[32m+[m[32m                                </group>[m[41m[m
[32m+[m[32m                            </div>[m[41m[m
[32m+[m[32m                            <div class="col-lg-6">[m[41m[m
[32m+[m[32m                                <group>[m[41m                            [m
[32m+[m[32m                                    <field name="principal" string="負責人"/>[m[41m[m
[32m+[m[32m                                    <field name="classification" string="缺失等級分類"/>[m[41m[m
[32m+[m[32m                                    <field name="classification_color" string="缺失分類顏色"/>[m[41m[m
[32m+[m[32m                                    <field name="classification_level" string="缺失等級"/>[m[41m[m
[32m+[m[32m                                    <field name="classification_common" string="缺失等級說明"/>[m[41m[m
[32m+[m[32m                                    <field name="floor" string="樓層"/>[m[41m[m
[32m+[m[32m                                    <field name="pillar" string="柱位"/>[m[41m[m
[32m+[m[32m                                    <field name="feeback" string="回報"/>[m[41m[m
[32m+[m[32m                                    <field name="penalties" string="罰則"/>[m[41m[m
[32m+[m[32m                                    <field name="improve" string="現場立即改善措施"/>[m[41m[m
[32m+[m[32m                                    <field name="improveDT" string="改善措施與時間"/>[m[41m[m
[32m+[m[32m                                    <field name="sign" widget="signature"/>[m[41m[m
[32m+[m[32m                                    <field name="sign2" widget="signature"/>[m[41m[m
[32m+[m[32m                                </group>[m[41m[m
[32m+[m[32m                            </div>[m[41m[m
[32m+[m[32m                        </div>[m[41m[m
[32m+[m[32m                        <notebook>[m[41m[m
[32m+[m[32m                            <page string="改善紀錄">[m[41m[m
[32m+[m[32m                                <field name="improvement_record_ids">[m[41m[m
[32m+[m[32m                                    <tree string="Improvement Records">[m[41m[m
[32m+[m[32m                                        <field name="name" string="改善前說明" style="width:20%;"/>[m[41m[m
[32m+[m[32m                                        <field name="photo_before" widget="image" string="改善前照片" style="width:25%;"/>[m[41m[m
[32m+[m[32m                                        <field name="name2" string="改善後說明" style="width:20%;"/>[m[41m[m
[32m+[m[32m                                        <field name="photo_after" widget="image" string="改善後照片" style="width:25%;"/>[m[41m[m
[32m+[m[32m                                    </tree>[m[41m[m
[32m+[m[32m                                </field>[m[41m[m
[32m+[m[32m                            </page>[m[41m[m
[32m+[m[32m                        </notebook>[m[41m[m
[32m+[m[32m                    </sheet>[m[41m[m
[32m+[m[32m                    <!-- 郵件發送與關注者 -->[m[41m[m
[32m+[m[32m                    <div class="oe_chatter">[m[41m [m
[32m+[m[32m                        <field name="message_follower_ids" widget="mail_followers"/>[m[41m[m
[32m+[m[32m                        <field name="message_ids" widget="mail_thread" string='發送訊息'/>[m[41m[m
[32m+[m[32m                        <field name="activity_ids" widget="mail_activity" string='活動'/>[m[41m[m
[32m+[m[32m                    </div>[m[41m[m
[32m+[m[32m                </form>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <record id="view_htpoc_missingrecords_search" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">htpoc.missingrecords.search</field>[m[41m[m
[32m+[m[32m            <field name="model">htpoc.missingrecords</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <search string="Missing Records Search">[m[41m[m
[32m+[m[32m                    <!-- 基本搜索字段 -->[m[41m[m
[32m+[m[32m                    <field name="create_uid" string="創建者"/>[m[41m[m
[32m+[m[32m                    <field name="create_date" string="創建日期"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m                    <!-- 基本過濾器 -->[m[41m[m
[32m+[m[32m                    <filter string="我的 Missing Records" name="my_records" domain="[('principal', '=', uid)]"/>[m[41m[m
[32m+[m[32m                    <filter string="本月創建" name="create_date" date="create_date" default_period="this_month"/>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m                    <!-- 基本分組 -->[m[41m[m
[32m+[m[32m                    <group expand="0" string="分組依據">[m[41m[m
[32m+[m[32m                        <filter string="業務夥伴" name="company" context="{'group_by': 'company'}"/>[m[41m[m
[32m+[m[32m                        <filter string="負責人" name="principal" context="{'group_by': 'principal'}"/>[m[41m[m
[32m+[m[32m                        <filter string="階段" name="state" context="{'group_by': 'state'}"/>[m[41m[m
[32m+[m[32m                    </group>[m[41m[m
[32m+[m[32m                </search>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Action -->[m[41m[m
[32m+[m[32m        <record id="htpoc_action" model="ir.actions.act_window">[m[41m[m
[32m+[m[32m            <field name="name">缺失紀錄表</field>[m[41m[m
[32m+[m[32m            <field name="res_model">htpoc.missingrecords</field>[m[41m[m
[32m+[m[32m            <field name="view_mode">tree,form</field>[m[41m[m
[32m+[m[32m            <!-- <field name="context">{'search_default_my_records': 1}</field> -->[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[32m    </data>[m[41m[m
[32m+[m[32m</odoo>[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/views/htpoc_missingrecords_type.xml b/views/htpoc_missingrecords_type.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..7d8a62b[m
[1m--- /dev/null[m
[1m+++ b/views/htpoc_missingrecords_type.xml[m
[36m@@ -0,0 +1,41 @@[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <data>[m[41m[m
[32m+[m[32m        <!-- Tree View -->[m[41m[m
[32m+[m[32m        <record id="view_htpoc_missingrecords_type_tree" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">htpoc.missingrecords.type.tree</field>[m[41m[m
[32m+[m[32m            <field name="model">htpoc.missingrecords.type</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <tree string="Htpoc Missingrecords Type">[m[41m[m
[32m+[m[32m                    <field name="name" placeholder="請輸入系統名稱"/>[m[41m[m
[32m+[m[32m                    <field name="sequence"/>[m[41m[m
[32m+[m[32m                </tree>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Form View -->[m[41m[m
[32m+[m[32m        <record id="view_htpoc_missingrecords_type_form" model="ir.ui.view">[m[41m[m
[32m+[m[32m            <field name="name">htpoc.missingrecords.type.form</field>[m[41m[m
[32m+[m[32m            <field name="model">htpoc.missingrecords.type</field>[m[41m[m
[32m+[m[32m            <field name="arch" type="xml">[m[41m[m
[32m+[m[32m                <form string="Htpoc Missingrecords Type">[m[41m[m
[32m+[m[32m                    <sheet>[m[41m[m
[32m+[m[32m                        <group>[m[41m[m
[32m+[m[32m                            <field name="name"/>[m[41m[m
[32m+[m[32m                            <field name="description"/>[m[41m[m
[32m+[m[32m                        </group>[m[41m[m
[32m+[m[32m                    </sheet>[m[41m[m
[32m+[m[32m                </form>[m[41m[m
[32m+[m[32m            </field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[41m[m
[32m+[m[32m        <!-- Action -->[m[41m[m
[32m+[m[32m        <record id="htpoc_missingrecords_type_action" model="ir.actions.act_window">[m[41m[m
[32m+[m[32m            <field name="name">Htpoc Missingrecords 缺失系統</field>[m[41m[m
[32m+[m[32m            <field name="res_model">htpoc.missingrecords.type</field>[m[41m[m
[32m+[m[32m            <field name="view_mode">tree,form</field>[m[41m[m
[32m+[m[32m        </record>[m[41m[m
[32m+[m[32m    </data>[m[41m[m
[32m+[m[32m</odoo>[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[1mdiff --git a/views/users.xml b/views/users.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..1bd39bc[m
[1m--- /dev/null[m
[1m+++ b/views/users.xml[m
[36m@@ -0,0 +1,28 @@[m
[32m+[m[32m<odoo>[m[41m[m
[32m+[m[32m    <data>[m[41m[m
[32m+[m[32m        <record id="view_users_with_token_tree" model="ir.ui.view">[m[41m[m
[32m+[m		[32m<field name="name">users.with.token.tree</field>[m[41m[m
[32m+[m		[32m<field name="model">res.users</field>[m[41m[m
[32m+[m		[32m<field name="arch" type="xml">[m[41m[m
[32m+[m			[32m<tree create="0">[m[41m[m
[32m+[m				[32m<field name="name" />[m[41m[m
[32m+[m				[32m<field name="auth_token" />[m[41m[m
[32m+[m				[32m<button[m[41m [m
[32m+[m					[32mstring="Generate Auth Token"[m[41m [m
[32m+[m					[32mtype="object"[m[41m [m
[32m+[m					[32mclass="oe_highlight"[m[41m [m
[32m+[m					[32mname="generate_auth_token"[m[41m[m
[32m+[m				[32m/>[m[41m[m
[32m+[m			[32m</tree>[m[41m[m
[32m+[m		[32m</field>[m[41m[m
[32m+[m	[32m</record>[m[41m[m
[32m+[m[41m[m
[32m+[m	[32m<record id="users_token_action" model="ir.actions.act_window">[m[41m[m
[32m+[m		[32m<field name="name">Users with Auth Token</field>[m[41m[m
[32m+[m		[32m<field name="res_model">res.users</field>[m[41m[m
[32m+[m		[32m<field name="view_mode">tree</field>[m[41m[m
[32m+[m		[32m<field name="view_id" ref="HTPOC.view_users_with_token_tree"></field>[m[41m[m
[32m+[m	[32m</record>[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m    </data>[m[41m[m
[32m+[m[32m</odoo>[m[41m[m
